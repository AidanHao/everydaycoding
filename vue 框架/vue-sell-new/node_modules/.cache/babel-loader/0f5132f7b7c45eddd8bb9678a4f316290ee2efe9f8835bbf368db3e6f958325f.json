{"ast":null,"code":"import { getGoods } from '@/api';\nimport SupportIcon from '@/components/support-icon/Support-icon.vue';\nimport BScroll from '@better-scroll/core';\nexport default {\n  components: {\n    SupportIcon: SupportIcon\n  },\n  data: function data() {\n    return {\n      goods: [],\n      currentIndex: 0\n    };\n  },\n  created: function created() {\n    var _this = this;\n    // 获取商品数据\n    getGoods().then(function (res) {\n      console.log(res);\n      _this.goods = res;\n      _this.$nextTick(function () {\n        // $nextTick里面的回调会在页面加载完毕之后才执行 $是vue自带的方法\n        _this.betterScroll();\n      });\n    });\n  },\n  methods: {\n    betterScroll: function betterScroll() {\n      // 获取到menu-wrapper的dom结构\n      // $官方自带的\n      new BScroll(this.$refs.menuWrapper, {\n        click: true\n      });\n      new BScroll(this.$refs.foodsWrapper, {\n        click: true\n      });\n    },\n    selectMenu: function selectMenu(i) {\n      // console.log(i);\n      this.currentIndex = i;\n    }\n  }\n};","map":{"version":3,"names":["getGoods","SupportIcon","BScroll","components","data","goods","currentIndex","created","_this","then","res","console","log","$nextTick","betterScroll","methods","$refs","menuWrapper","click","foodsWrapper","selectMenu","i"],"sources":["C:\\Users\\www16\\Desktop\\培训\\codespace\\vue 框架\\vue-sell-new\\src\\views\\goods\\index.vue"],"sourcesContent":["<template>\n  <div class=\"goods\">\n    <div class=\"goods-content\">\n      <div class=\"menu-wrapper\" ref=\"menuWrapper\">\n        <ul>\n          <li \n            class=\"menu-item\" \n            :class=\"{'current' : currentIndex === index}\"\n            v-for=\"(item, index) in goods\" \n            :key=\"index\"\n            @click=\"selectMenu(index)\"\n          >\n            <span class=\"text\">\n              <SupportIcon size=\"3\" :type=\"item.type\" v-if=\"item.type >= 0\"/>\n              {{item.name}}\n            </span>\n          </li>\n        </ul>\n      </div>  \n      <!-- ref给Dom结构打一个标记 -->\n      <div class=\"foods-wrapper\" ref=\"foodsWrapper\">\n        <ul>\n          <!-- 一个菜系 -->\n          <li class=\"food-list\"\n          v-for=\"(item,index) in goods\" :key=\"index\"\n          >\n              <h1 class=\"title\">{{ item.name }}</h1>\n              <!-- 一道道菜 -->\n              <ul>\n                <li class=\"food-item\"  v-for=\"(item2 ,index2) in item.foods\" :key=\"index2\">\n                  <div class=\"pic\">\n                    <img :src=\"item2.image\" alt=\"\">\n                  </div>\n                  <div class=\"content\">\n\n                    <h2 class=\"name\">{{ item2.name }}</h2>\n\n                    <p class=\"desc\">{{ item2.description }}</p>\n\n                    <div class=\"extra\">\n                      <span class=\"count\">月售{{ item2.sellcout }}份</span>\n                      <span>好评率{{item2.rating}}%</span>\n                    </div>\n\n                    <div class=\"price\">\n                      <span class=\"now\">￥{{ item2.price  }}</span>\n                      <span class=\"old\" v-if=\" item2.oldPrice \">￥{{ item2.oldPrice }}</span>\n                    </div>\n                    <!-- + -->\n                  </div>\n                </li>\n              </ul>\n\n          </li>\n        </ul>\n      </div>\n    </div>\n    \n    <div class=\"cart-wrapper\">购物车</div>\n  </div>\n</template>\n\n<script>\nimport { getGoods } from '@/api'\nimport SupportIcon from '@/components/support-icon/Support-icon.vue'\nimport BScroll from '@better-scroll/core'\n\nexport default {\n  components: {\n    SupportIcon\n  },\n  data() {\n    return {\n      goods: [],\n      currentIndex: 0\n    }\n  },\n  created() {\n    // 获取商品数据\n    getGoods().then(res => {\n      console.log(res);\n      this.goods = res\n      \n      this.$nextTick(() => { // $nextTick里面的回调会在页面加载完毕之后才执行 $是vue自带的方法\n        this.betterScroll()\n      })\n    })\n  },\n  methods: {\n    betterScroll() {\n      // 获取到menu-wrapper的dom结构\n      // $官方自带的\n      new BScroll(this.$refs.menuWrapper, {\n        click: true\n      })\n      new BScroll(this.$refs.foodsWrapper,{\n        click:true\n      })\n\n    },\n    selectMenu(i) {\n      // console.log(i);\n      this.currentIndex = i\n    },\n\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import '@/common/style/variable.less';\n.goods{\n  position: absolute;\n  width: 100%;\n  bottom: 46px;\n  top: 177px;\n  overflow: hidden;\n  &-content{\n    display: flex;\n    height: 100%;\n    .menu-wrapper{\n      flex: 0 0 80px;\n      background: @color-background-ssss;\n      .menu-item{\n        padding: 0 14px;\n        font-size: @fontsize-small;\n        height: 54px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        &.current{\n          background: #fff;\n          font-weight: 700;\n        }\n      }\n    }\n    .foods-wrapper{\n      flex: 1;\n      .title{\n        height: 26px;\n        line-height: 26px;\n        font-size: @fontsize-small;\n        color: rgb(147, 153, 159);\n        background: @color-background-ssss;\n        padding-left: 14px;\n        border-left:2px solid #d9dde1;\n      }\n      .food-item{\n        display: flex;\n        padding:18px ;\n        .pic{\n          flex: 0 0 57px;\n          margin-right: 10px;\n          img{\n            width: 100%;\n          }\n        }\n        .content{\n          flex: 1;\n          .name{\n            font-size: @fontsize-medium;\n            color: rgb(7, 17, 27);\n            margin: 2px 0 8px 0;\n          }\n          .desc, .extra{\n            font-size: @fontsize-small-s;\n            color: rgb(147, 153, 159);\n            margin-bottom: 8px;\n            line-height: 10px;\n            .count{\n              margin-right: 12px;\n            }\n          }\n          .price{\n            // 最大七百\n            font-weight: 700;\n            line-height: 10px;\n            .now{\n              color:@color-red ;\n              font-size: @fontsize-medium;\n              margin-right: 8px;\n            }\n            .old{\n              font-size:@fontsize-small-s ;\n              color: rgb(147, 153, 159);\n              // 拦腰下划线\n              text-decoration: line-through;\n            }\n          }\n        }\n\n      }\n    }\n  }\n\n  .cart-wrapper{\n    position: fixed;\n    bottom: 0;\n    width: 100%;\n    height: 48px;\n    background: #aaa;\n  }\n}\n</style>"],"mappings":"AA+DA,SAASA,QAAO,QAAS,OAAM;AAC/B,OAAOC,WAAU,MAAO,4CAA2C;AACnE,OAAOC,OAAM,MAAO,qBAAoB;AAExC,eAAe;EACbC,UAAU,EAAE;IACVF,WAAU,EAAVA;EACF,CAAC;EACDG,IAAI,WAAAA,KAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAE;IAChB;EACF,CAAC;EACDC,OAAO,WAAAA,QAAA,EAAG;IAAA,IAAAC,KAAA;IACR;IACAR,QAAQ,CAAC,CAAC,CAACS,IAAI,CAAC,UAAAC,GAAE,EAAK;MACrBC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChBF,KAAI,CAACH,KAAI,GAAIK,GAAE;MAEfF,KAAI,CAACK,SAAS,CAAC,YAAM;QAAE;QACrBL,KAAI,CAACM,YAAY,CAAC;MACpB,CAAC;IACH,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPD,YAAY,WAAAA,aAAA,EAAG;MACb;MACA;MACA,IAAIZ,OAAO,CAAC,IAAI,CAACc,KAAK,CAACC,WAAW,EAAE;QAClCC,KAAK,EAAE;MACT,CAAC;MACD,IAAIhB,OAAO,CAAC,IAAI,CAACc,KAAK,CAACG,YAAY,EAAC;QAClCD,KAAK,EAAC;MACR,CAAC;IAEH,CAAC;IACDE,UAAU,WAAAA,WAACC,CAAC,EAAE;MACZ;MACA,IAAI,CAACf,YAAW,GAAIe,CAAA;IACtB;EAEF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}