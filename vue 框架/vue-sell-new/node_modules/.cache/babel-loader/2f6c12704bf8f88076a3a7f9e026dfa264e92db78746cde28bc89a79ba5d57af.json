{"ast":null,"code":"import _typeof from \"C:/Users/www16/Desktop/\\u57F9\\u8BAD/codespace/vue \\u6846\\u67B6/vue-sell-new/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.object.set-prototype-of.js\";\nimport \"core-js/modules/es.object.proto.js\";\nimport \"core-js/modules/es.object.create.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.string.substr.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.function.bind.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.sort.js\";\n/*!\n * better-scroll / core\n * (c) 2016-2023 ustbhuangyi\n * Released under the MIT License.\n */\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n  return _extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return _assign.apply(this, arguments);\n};\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n}\nvar propertiesConfig = [{\n  sourceKey: 'scroller.scrollBehaviorX.currentPos',\n  key: 'x'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.currentPos',\n  key: 'y'\n}, {\n  sourceKey: 'scroller.scrollBehaviorX.hasScroll',\n  key: 'hasHorizontalScroll'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.hasScroll',\n  key: 'hasVerticalScroll'\n}, {\n  sourceKey: 'scroller.scrollBehaviorX.contentSize',\n  key: 'scrollerWidth'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.contentSize',\n  key: 'scrollerHeight'\n}, {\n  sourceKey: 'scroller.scrollBehaviorX.maxScrollPos',\n  key: 'maxScrollX'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.maxScrollPos',\n  key: 'maxScrollY'\n}, {\n  sourceKey: 'scroller.scrollBehaviorX.minScrollPos',\n  key: 'minScrollX'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.minScrollPos',\n  key: 'minScrollY'\n}, {\n  sourceKey: 'scroller.scrollBehaviorX.movingDirection',\n  key: 'movingDirectionX'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.movingDirection',\n  key: 'movingDirectionY'\n}, {\n  sourceKey: 'scroller.scrollBehaviorX.direction',\n  key: 'directionX'\n}, {\n  sourceKey: 'scroller.scrollBehaviorY.direction',\n  key: 'directionY'\n}, {\n  sourceKey: 'scroller.actions.enabled',\n  key: 'enabled'\n}, {\n  sourceKey: 'scroller.animater.pending',\n  key: 'pending'\n}, {\n  sourceKey: 'scroller.animater.stop',\n  key: 'stop'\n}, {\n  sourceKey: 'scroller.scrollTo',\n  key: 'scrollTo'\n}, {\n  sourceKey: 'scroller.scrollBy',\n  key: 'scrollBy'\n}, {\n  sourceKey: 'scroller.scrollToElement',\n  key: 'scrollToElement'\n}, {\n  sourceKey: 'scroller.resetPosition',\n  key: 'resetPosition'\n}];\nfunction warn(msg) {\n  console.error(\"[BScroll warn]: \" + msg);\n}\n\n// ssr support\nvar inBrowser = typeof window !== 'undefined';\nvar ua = inBrowser && navigator.userAgent.toLowerCase();\nvar isWeChatDevTools = !!(ua && /wechatdevtools/.test(ua));\nvar isAndroid = ua && ua.indexOf('android') > 0;\n/* istanbul ignore next */\nvar isIOSBadVersion = function () {\n  if (typeof ua === 'string') {\n    var regex = /os (\\d\\d?_\\d(_\\d)?)/;\n    var matches = regex.exec(ua);\n    if (!matches) return false;\n    var parts = matches[1].split('_').map(function (item) {\n      return parseInt(item, 10);\n    });\n    // ios version >= 13.4 issue 982\n    return !!(parts[0] === 13 && parts[1] >= 4);\n  }\n  return false;\n}();\n/* istanbul ignore next */\nvar supportsPassive = false;\n/* istanbul ignore next */\nif (inBrowser) {\n  var EventName = 'test-passive';\n  try {\n    var opts = {};\n    Object.defineProperty(opts, 'passive', {\n      get: function get() {\n        supportsPassive = true;\n      }\n    }); // https://github.com/facebook/flow/issues/285\n    window.addEventListener(EventName, function () {}, opts);\n  } catch (e) {}\n}\nfunction getNow() {\n  return window.performance && window.performance.now && window.performance.timing ? window.performance.now() + window.performance.timing.navigationStart : +new Date();\n}\nvar extend = function extend(target, source) {\n  for (var key in source) {\n    target[key] = source[key];\n  }\n  return target;\n};\nfunction isUndef(v) {\n  return v === undefined || v === null;\n}\nfunction between(x, min, max) {\n  if (x < min) {\n    return min;\n  }\n  if (x > max) {\n    return max;\n  }\n  return x;\n}\nvar elementStyle = inBrowser && document.createElement('div').style;\nvar vendor = function () {\n  /* istanbul ignore if  */\n  if (!inBrowser) {\n    return false;\n  }\n  var transformNames = [{\n    key: 'standard',\n    value: 'transform'\n  }, {\n    key: 'webkit',\n    value: 'webkitTransform'\n  }, {\n    key: 'Moz',\n    value: 'MozTransform'\n  }, {\n    key: 'O',\n    value: 'OTransform'\n  }, {\n    key: 'ms',\n    value: 'msTransform'\n  }];\n  for (var _i = 0, transformNames_1 = transformNames; _i < transformNames_1.length; _i++) {\n    var obj = transformNames_1[_i];\n    if (elementStyle[obj.value] !== undefined) {\n      return obj.key;\n    }\n  }\n  /* istanbul ignore next  */\n  return false;\n}();\n/* istanbul ignore next  */\nfunction prefixStyle(style) {\n  if (vendor === false) {\n    return style;\n  }\n  if (vendor === 'standard') {\n    if (style === 'transitionEnd') {\n      return 'transitionend';\n    }\n    return style;\n  }\n  return vendor + style.charAt(0).toUpperCase() + style.substr(1);\n}\nfunction getElement(el) {\n  return typeof el === 'string' ? document.querySelector(el) : el;\n}\nfunction addEvent(el, type, fn, capture) {\n  var useCapture = supportsPassive ? {\n    passive: false,\n    capture: !!capture\n  } : !!capture;\n  el.addEventListener(type, fn, useCapture);\n}\nfunction removeEvent(el, type, fn, capture) {\n  el.removeEventListener(type, fn, {\n    capture: !!capture\n  });\n}\nfunction maybePrevent(e) {\n  if (e.cancelable) {\n    e.preventDefault();\n  }\n}\nfunction offset(el) {\n  var left = 0;\n  var top = 0;\n  while (el) {\n    left -= el.offsetLeft;\n    top -= el.offsetTop;\n    el = el.offsetParent;\n  }\n  return {\n    left: left,\n    top: top\n  };\n}\nvendor && vendor !== 'standard' ? '-' + vendor.toLowerCase() + '-' : '';\nvar transform = prefixStyle('transform');\nvar transition = prefixStyle('transition');\nvar hasPerspective = inBrowser && prefixStyle('perspective') in elementStyle;\n// fix issue #361\nvar hasTouch = inBrowser && ('ontouchstart' in window || isWeChatDevTools);\nvar hasTransition = inBrowser && transition in elementStyle;\nvar style = {\n  transform: transform,\n  transition: transition,\n  transitionTimingFunction: prefixStyle('transitionTimingFunction'),\n  transitionDuration: prefixStyle('transitionDuration'),\n  transitionDelay: prefixStyle('transitionDelay'),\n  transformOrigin: prefixStyle('transformOrigin'),\n  transitionEnd: prefixStyle('transitionEnd'),\n  transitionProperty: prefixStyle('transitionProperty')\n};\nvar eventTypeMap = {\n  touchstart: 1,\n  touchmove: 1,\n  touchend: 1,\n  touchcancel: 1,\n  mousedown: 2,\n  mousemove: 2,\n  mouseup: 2\n};\nfunction getRect(el) {\n  /* istanbul ignore if  */\n  if (el instanceof window.SVGElement) {\n    var rect = el.getBoundingClientRect();\n    return {\n      top: rect.top,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height\n    };\n  } else {\n    return {\n      top: el.offsetTop,\n      left: el.offsetLeft,\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    };\n  }\n}\nfunction preventDefaultExceptionFn(el, exceptions) {\n  for (var i in exceptions) {\n    if (exceptions[i].test(el[i])) {\n      return true;\n    }\n  }\n  return false;\n}\nvar tagExceptionFn = preventDefaultExceptionFn;\nfunction tap(e, eventName) {\n  var ev = document.createEvent('Event');\n  ev.initEvent(eventName, true, true);\n  ev.pageX = e.pageX;\n  ev.pageY = e.pageY;\n  e.target.dispatchEvent(ev);\n}\nfunction click(e, event) {\n  if (event === void 0) {\n    event = 'click';\n  }\n  var eventSource;\n  if (e.type === 'mouseup') {\n    eventSource = e;\n  } else if (e.type === 'touchend' || e.type === 'touchcancel') {\n    eventSource = e.changedTouches[0];\n  }\n  var posSrc = {};\n  if (eventSource) {\n    posSrc.screenX = eventSource.screenX || 0;\n    posSrc.screenY = eventSource.screenY || 0;\n    posSrc.clientX = eventSource.clientX || 0;\n    posSrc.clientY = eventSource.clientY || 0;\n  }\n  var ev;\n  var bubbles = true;\n  var cancelable = true;\n  var ctrlKey = e.ctrlKey,\n    shiftKey = e.shiftKey,\n    altKey = e.altKey,\n    metaKey = e.metaKey;\n  var pressedKeysMap = {\n    ctrlKey: ctrlKey,\n    shiftKey: shiftKey,\n    altKey: altKey,\n    metaKey: metaKey\n  };\n  if (typeof MouseEvent !== 'undefined') {\n    try {\n      ev = new MouseEvent(event, extend(_assign({\n        bubbles: bubbles,\n        cancelable: cancelable\n      }, pressedKeysMap), posSrc));\n    } catch (e) {\n      /* istanbul ignore next */\n      createEvent();\n    }\n  } else {\n    createEvent();\n  }\n  function createEvent() {\n    ev = document.createEvent('Event');\n    ev.initEvent(event, bubbles, cancelable);\n    extend(ev, posSrc);\n  }\n  // forwardedTouchEvent set to true in case of the conflict with fastclick\n  ev.forwardedTouchEvent = true;\n  ev._constructed = true;\n  e.target.dispatchEvent(ev);\n}\nfunction dblclick(e) {\n  click(e, 'dblclick');\n}\nvar ease = {\n  // easeOutQuint\n  swipe: {\n    style: 'cubic-bezier(0.23, 1, 0.32, 1)',\n    fn: function fn(t) {\n      return 1 + --t * t * t * t * t;\n    }\n  },\n  // easeOutQuard\n  swipeBounce: {\n    style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n    fn: function fn(t) {\n      return t * (2 - t);\n    }\n  },\n  // easeOutQuart\n  bounce: {\n    style: 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n    fn: function fn(t) {\n      return 1 - --t * t * t * t;\n    }\n  }\n};\nvar DEFAULT_INTERVAL = 1000 / 60;\nvar windowCompat = inBrowser && window;\n/* istanbul ignore next */\nfunction noop$1() {}\nvar requestAnimationFrame = function () {\n  /* istanbul ignore if  */\n  if (!inBrowser) {\n    return noop$1;\n  }\n  return windowCompat.requestAnimationFrame || windowCompat.webkitRequestAnimationFrame || windowCompat.mozRequestAnimationFrame || windowCompat.oRequestAnimationFrame ||\n  // if all else fails, use setTimeout\n  function (callback) {\n    return window.setTimeout(callback, callback.interval || DEFAULT_INTERVAL); // make interval as precise as possible.\n  };\n}();\nvar cancelAnimationFrame = function () {\n  /* istanbul ignore if  */\n  if (!inBrowser) {\n    return noop$1;\n  }\n  return windowCompat.cancelAnimationFrame || windowCompat.webkitCancelAnimationFrame || windowCompat.mozCancelAnimationFrame || windowCompat.oCancelAnimationFrame || function (id) {\n    window.clearTimeout(id);\n  };\n}();\n\n/* istanbul ignore next */\nvar noop = function noop(val) {};\nvar sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n};\nvar getProperty = function getProperty(obj, key) {\n  var keys = key.split('.');\n  for (var i = 0; i < keys.length - 1; i++) {\n    obj = obj[keys[i]];\n    if (_typeof(obj) !== 'object' || !obj) return;\n  }\n  var lastKey = keys.pop();\n  if (typeof obj[lastKey] === 'function') {\n    return function () {\n      return obj[lastKey].apply(obj, arguments);\n    };\n  } else {\n    return obj[lastKey];\n  }\n};\nvar setProperty = function setProperty(obj, key, value) {\n  var keys = key.split('.');\n  var temp;\n  for (var i = 0; i < keys.length - 1; i++) {\n    temp = keys[i];\n    if (!obj[temp]) obj[temp] = {};\n    obj = obj[temp];\n  }\n  obj[keys.pop()] = value;\n};\nfunction propertiesProxy(target, sourceKey, key) {\n  sharedPropertyDefinition.get = function proxyGetter() {\n    return getProperty(this, sourceKey);\n  };\n  sharedPropertyDefinition.set = function proxySetter(val) {\n    setProperty(this, sourceKey, val);\n  };\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\nvar EventEmitter = /** @class */function () {\n  function EventEmitter(names) {\n    this.events = {};\n    this.eventTypes = {};\n    this.registerType(names);\n  }\n  EventEmitter.prototype.on = function (type, fn, context) {\n    if (context === void 0) {\n      context = this;\n    }\n    this.hasType(type);\n    if (!this.events[type]) {\n      this.events[type] = [];\n    }\n    this.events[type].push([fn, context]);\n    return this;\n  };\n  EventEmitter.prototype.once = function (type, fn, context) {\n    var _this = this;\n    if (context === void 0) {\n      context = this;\n    }\n    this.hasType(type);\n    var magic = function magic() {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      _this.off(type, magic);\n      var ret = fn.apply(context, args);\n      if (ret === true) {\n        return ret;\n      }\n    };\n    magic.fn = fn;\n    this.on(type, magic);\n    return this;\n  };\n  EventEmitter.prototype.off = function (type, fn) {\n    if (!type && !fn) {\n      this.events = {};\n      return this;\n    }\n    if (type) {\n      this.hasType(type);\n      if (!fn) {\n        this.events[type] = [];\n        return this;\n      }\n      var events = this.events[type];\n      if (!events) {\n        return this;\n      }\n      var count = events.length;\n      while (count--) {\n        if (events[count][0] === fn || events[count][0] && events[count][0].fn === fn) {\n          events.splice(count, 1);\n        }\n      }\n      return this;\n    }\n  };\n  EventEmitter.prototype.trigger = function (type) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n    this.hasType(type);\n    var events = this.events[type];\n    if (!events) {\n      return;\n    }\n    var len = events.length;\n    var eventsCopy = __spreadArrays(events);\n    var ret;\n    for (var i = 0; i < len; i++) {\n      var event_1 = eventsCopy[i];\n      var fn = event_1[0],\n        context = event_1[1];\n      if (fn) {\n        ret = fn.apply(context, args);\n        if (ret === true) {\n          return ret;\n        }\n      }\n    }\n  };\n  EventEmitter.prototype.registerType = function (names) {\n    var _this = this;\n    names.forEach(function (type) {\n      _this.eventTypes[type] = type;\n    });\n  };\n  EventEmitter.prototype.destroy = function () {\n    this.events = {};\n    this.eventTypes = {};\n  };\n  EventEmitter.prototype.hasType = function (type) {\n    var types = this.eventTypes;\n    var isType = types[type] === type;\n    if (!isType) {\n      warn(\"EventEmitter has used unknown event type: \\\"\" + type + \"\\\", should be oneof [\" + (\"\" + Object.keys(types).map(function (_) {\n        return JSON.stringify(_);\n      })) + \"]\");\n    }\n  };\n  return EventEmitter;\n}();\nvar EventRegister = /** @class */function () {\n  function EventRegister(wrapper, events) {\n    this.wrapper = wrapper;\n    this.events = events;\n    this.addDOMEvents();\n  }\n  EventRegister.prototype.destroy = function () {\n    this.removeDOMEvents();\n    this.events = [];\n  };\n  EventRegister.prototype.addDOMEvents = function () {\n    this.handleDOMEvents(addEvent);\n  };\n  EventRegister.prototype.removeDOMEvents = function () {\n    this.handleDOMEvents(removeEvent);\n  };\n  EventRegister.prototype.handleDOMEvents = function (eventOperation) {\n    var _this = this;\n    var wrapper = this.wrapper;\n    this.events.forEach(function (event) {\n      eventOperation(wrapper, event.name, _this, !!event.capture);\n    });\n  };\n  EventRegister.prototype.handleEvent = function (e) {\n    var eventType = e.type;\n    this.events.some(function (event) {\n      if (event.name === eventType) {\n        event.handler(e);\n        return true;\n      }\n      return false;\n    });\n  };\n  return EventRegister;\n}();\nvar CustomOptions = /** @class */function () {\n  function CustomOptions() {}\n  return CustomOptions;\n}();\nvar OptionsConstructor = /** @class */function (_super) {\n  __extends(OptionsConstructor, _super);\n  function OptionsConstructor() {\n    var _this = _super.call(this) || this;\n    _this.startX = 0;\n    _this.startY = 0;\n    _this.scrollX = false;\n    _this.scrollY = true;\n    _this.freeScroll = false;\n    _this.directionLockThreshold = 0;\n    _this.eventPassthrough = \"\" /* None */;\n    _this.click = false;\n    _this.dblclick = false;\n    _this.tap = '';\n    _this.bounce = {\n      top: true,\n      bottom: true,\n      left: true,\n      right: true\n    };\n    _this.bounceTime = 800;\n    _this.momentum = true;\n    _this.momentumLimitTime = 300;\n    _this.momentumLimitDistance = 15;\n    _this.swipeTime = 2500;\n    _this.swipeBounceTime = 500;\n    _this.deceleration = 0.0015;\n    _this.flickLimitTime = 200;\n    _this.flickLimitDistance = 100;\n    _this.resizePolling = 60;\n    _this.probeType = 0 /* Default */;\n    _this.stopPropagation = false;\n    _this.preventDefault = true;\n    _this.preventDefaultException = {\n      tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/\n    };\n    _this.tagException = {\n      tagName: /^TEXTAREA$/\n    };\n    _this.HWCompositing = true;\n    _this.useTransition = true;\n    _this.bindToWrapper = false;\n    _this.bindToTarget = false;\n    _this.disableMouse = hasTouch;\n    _this.disableTouch = !hasTouch;\n    _this.autoBlur = true;\n    _this.autoEndDistance = 5;\n    _this.outOfBoundaryDampingFactor = 1 / 3;\n    _this.specifiedIndexAsContent = 0;\n    _this.quadrant = 1 /* First */;\n    return _this;\n  }\n  OptionsConstructor.prototype.merge = function (options) {\n    if (!options) return this;\n    for (var key in options) {\n      if (key === 'bounce') {\n        this.bounce = this.resolveBounce(options[key]);\n        continue;\n      }\n      this[key] = options[key];\n    }\n    return this;\n  };\n  OptionsConstructor.prototype.process = function () {\n    this.translateZ = this.HWCompositing && hasPerspective ? ' translateZ(1px)' : '';\n    this.useTransition = this.useTransition && hasTransition;\n    this.preventDefault = !this.eventPassthrough && this.preventDefault;\n    // If you want eventPassthrough I have to lock one of the axes\n    this.scrollX = this.eventPassthrough === \"horizontal\" /* Horizontal */ ? false : this.scrollX;\n    this.scrollY = this.eventPassthrough === \"vertical\" /* Vertical */ ? false : this.scrollY;\n    // With eventPassthrough we also need lockDirection mechanism\n    this.freeScroll = this.freeScroll && !this.eventPassthrough;\n    // force true when freeScroll is true\n    this.scrollX = this.freeScroll ? true : this.scrollX;\n    this.scrollY = this.freeScroll ? true : this.scrollY;\n    this.directionLockThreshold = this.eventPassthrough ? 0 : this.directionLockThreshold;\n    return this;\n  };\n  OptionsConstructor.prototype.resolveBounce = function (bounceOptions) {\n    var DEFAULT_BOUNCE = {\n      top: true,\n      right: true,\n      bottom: true,\n      left: true\n    };\n    var NEGATED_BOUNCE = {\n      top: false,\n      right: false,\n      bottom: false,\n      left: false\n    };\n    var ret;\n    if (_typeof(bounceOptions) === 'object') {\n      ret = extend(DEFAULT_BOUNCE, bounceOptions);\n    } else {\n      ret = bounceOptions ? DEFAULT_BOUNCE : NEGATED_BOUNCE;\n    }\n    return ret;\n  };\n  return OptionsConstructor;\n}(CustomOptions);\nvar ActionsHandler = /** @class */function () {\n  function ActionsHandler(wrapper, options) {\n    this.wrapper = wrapper;\n    this.options = options;\n    this.hooks = new EventEmitter(['beforeStart', 'start', 'move', 'end', 'click']);\n    this.handleDOMEvents();\n  }\n  ActionsHandler.prototype.handleDOMEvents = function () {\n    var _a = this.options,\n      bindToWrapper = _a.bindToWrapper,\n      disableMouse = _a.disableMouse,\n      disableTouch = _a.disableTouch,\n      click = _a.click;\n    var wrapper = this.wrapper;\n    var target = bindToWrapper ? wrapper : window;\n    var wrapperEvents = [];\n    var targetEvents = [];\n    var shouldRegisterTouch = !disableTouch;\n    var shouldRegisterMouse = !disableMouse;\n    if (click) {\n      wrapperEvents.push({\n        name: 'click',\n        handler: this.click.bind(this),\n        capture: true\n      });\n    }\n    if (shouldRegisterTouch) {\n      wrapperEvents.push({\n        name: 'touchstart',\n        handler: this.start.bind(this)\n      });\n      targetEvents.push({\n        name: 'touchmove',\n        handler: this.move.bind(this)\n      }, {\n        name: 'touchend',\n        handler: this.end.bind(this)\n      }, {\n        name: 'touchcancel',\n        handler: this.end.bind(this)\n      });\n    }\n    if (shouldRegisterMouse) {\n      wrapperEvents.push({\n        name: 'mousedown',\n        handler: this.start.bind(this)\n      });\n      targetEvents.push({\n        name: 'mousemove',\n        handler: this.move.bind(this)\n      }, {\n        name: 'mouseup',\n        handler: this.end.bind(this)\n      });\n    }\n    this.wrapperEventRegister = new EventRegister(wrapper, wrapperEvents);\n    this.targetEventRegister = new EventRegister(target, targetEvents);\n  };\n  ActionsHandler.prototype.beforeHandler = function (e, type) {\n    var _a = this.options,\n      preventDefault = _a.preventDefault,\n      stopPropagation = _a.stopPropagation,\n      preventDefaultException = _a.preventDefaultException;\n    var preventDefaultConditions = {\n      start: function start() {\n        return preventDefault && !preventDefaultExceptionFn(e.target, preventDefaultException);\n      },\n      end: function end() {\n        return preventDefault && !preventDefaultExceptionFn(e.target, preventDefaultException);\n      },\n      move: function move() {\n        return preventDefault;\n      }\n    };\n    if (preventDefaultConditions[type]()) {\n      e.preventDefault();\n    }\n    if (stopPropagation) {\n      e.stopPropagation();\n    }\n  };\n  ActionsHandler.prototype.setInitiated = function (type) {\n    if (type === void 0) {\n      type = 0;\n    }\n    this.initiated = type;\n  };\n  ActionsHandler.prototype.start = function (e) {\n    var _eventType = eventTypeMap[e.type];\n    if (this.initiated && this.initiated !== _eventType) {\n      return;\n    }\n    this.setInitiated(_eventType);\n    // if textarea or other html tags in options.tagException is manipulated\n    // do not make bs scroll\n    if (tagExceptionFn(e.target, this.options.tagException)) {\n      this.setInitiated();\n      return;\n    }\n    // only allow mouse left button\n    if (_eventType === 2 /* Mouse */ && e.button !== 0 /* Left */) return;\n    if (this.hooks.trigger(this.hooks.eventTypes.beforeStart, e)) {\n      return;\n    }\n    this.beforeHandler(e, 'start');\n    var point = e.touches ? e.touches[0] : e;\n    this.pointX = point.pageX;\n    this.pointY = point.pageY;\n    this.hooks.trigger(this.hooks.eventTypes.start, e);\n  };\n  ActionsHandler.prototype.move = function (e) {\n    if (eventTypeMap[e.type] !== this.initiated) {\n      return;\n    }\n    this.beforeHandler(e, 'move');\n    var point = e.touches ? e.touches[0] : e;\n    var deltaX = point.pageX - this.pointX;\n    var deltaY = point.pageY - this.pointY;\n    this.pointX = point.pageX;\n    this.pointY = point.pageY;\n    if (this.hooks.trigger(this.hooks.eventTypes.move, {\n      deltaX: deltaX,\n      deltaY: deltaY,\n      e: e\n    })) {\n      return;\n    }\n    // auto end when out of viewport\n    var scrollLeft = document.documentElement.scrollLeft || window.pageXOffset || document.body.scrollLeft;\n    var scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n    var pX = this.pointX - scrollLeft;\n    var pY = this.pointY - scrollTop;\n    var autoEndDistance = this.options.autoEndDistance;\n    if (pX > document.documentElement.clientWidth - autoEndDistance || pY > document.documentElement.clientHeight - autoEndDistance || pX < autoEndDistance || pY < autoEndDistance) {\n      this.end(e);\n    }\n  };\n  ActionsHandler.prototype.end = function (e) {\n    if (eventTypeMap[e.type] !== this.initiated) {\n      return;\n    }\n    this.setInitiated();\n    this.beforeHandler(e, 'end');\n    this.hooks.trigger(this.hooks.eventTypes.end, e);\n  };\n  ActionsHandler.prototype.click = function (e) {\n    this.hooks.trigger(this.hooks.eventTypes.click, e);\n  };\n  ActionsHandler.prototype.setContent = function (content) {\n    if (content !== this.wrapper) {\n      this.wrapper = content;\n      this.rebindDOMEvents();\n    }\n  };\n  ActionsHandler.prototype.rebindDOMEvents = function () {\n    this.wrapperEventRegister.destroy();\n    this.targetEventRegister.destroy();\n    this.handleDOMEvents();\n  };\n  ActionsHandler.prototype.destroy = function () {\n    this.wrapperEventRegister.destroy();\n    this.targetEventRegister.destroy();\n    this.hooks.destroy();\n  };\n  return ActionsHandler;\n}();\nvar translaterMetaData = {\n  x: ['translateX', 'px'],\n  y: ['translateY', 'px']\n};\nvar Translater = /** @class */function () {\n  function Translater(content) {\n    this.setContent(content);\n    this.hooks = new EventEmitter(['beforeTranslate', 'translate']);\n  }\n  Translater.prototype.getComputedPosition = function () {\n    var cssStyle = window.getComputedStyle(this.content, null);\n    var matrix = cssStyle[style.transform].split(')')[0].split(', ');\n    var x = +(matrix[12] || matrix[4]) || 0;\n    var y = +(matrix[13] || matrix[5]) || 0;\n    return {\n      x: x,\n      y: y\n    };\n  };\n  Translater.prototype.translate = function (point) {\n    var transformStyle = [];\n    Object.keys(point).forEach(function (key) {\n      if (!translaterMetaData[key]) {\n        return;\n      }\n      var transformFnName = translaterMetaData[key][0];\n      if (transformFnName) {\n        var transformFnArgUnit = translaterMetaData[key][1];\n        var transformFnArg = point[key];\n        transformStyle.push(transformFnName + \"(\" + transformFnArg + transformFnArgUnit + \")\");\n      }\n    });\n    this.hooks.trigger(this.hooks.eventTypes.beforeTranslate, transformStyle, point);\n    this.style[style.transform] = transformStyle.join(' ');\n    this.hooks.trigger(this.hooks.eventTypes.translate, point);\n  };\n  Translater.prototype.setContent = function (content) {\n    if (this.content !== content) {\n      this.content = content;\n      this.style = content.style;\n    }\n  };\n  Translater.prototype.destroy = function () {\n    this.hooks.destroy();\n  };\n  return Translater;\n}();\nvar Base = /** @class */function () {\n  function Base(content, translater, options) {\n    this.translater = translater;\n    this.options = options;\n    this.timer = 0;\n    this.hooks = new EventEmitter(['move', 'end', 'beforeForceStop', 'forceStop', 'callStop', 'time', 'timeFunction']);\n    this.setContent(content);\n  }\n  Base.prototype.translate = function (endPoint) {\n    this.translater.translate(endPoint);\n  };\n  Base.prototype.setPending = function (pending) {\n    this.pending = pending;\n  };\n  Base.prototype.setForceStopped = function (forceStopped) {\n    this.forceStopped = forceStopped;\n  };\n  Base.prototype.setCallStop = function (called) {\n    this.callStopWhenPending = called;\n  };\n  Base.prototype.setContent = function (content) {\n    if (this.content !== content) {\n      this.content = content;\n      this.style = content.style;\n      this.stop();\n    }\n  };\n  Base.prototype.clearTimer = function () {\n    if (this.timer) {\n      cancelAnimationFrame(this.timer);\n      this.timer = 0;\n    }\n  };\n  Base.prototype.destroy = function () {\n    this.hooks.destroy();\n    cancelAnimationFrame(this.timer);\n  };\n  return Base;\n}();\n\n// iOS 13.6 - 14.x, window.getComputedStyle sometimes will get wrong transform value\n// when bs use transition mode\n// eg: translateY -100px -> -200px, when the last frame which is about to scroll to -200px\n// window.getComputedStyle(this.content) will calculate transformY to be -100px(startPoint)\n// it is weird\n// so we should validate position caculated by 'window.getComputedStyle'\nvar isValidPostion = function isValidPostion(startPoint, endPoint, currentPos, prePos) {\n  var computeDirection = function computeDirection(endValue, startValue) {\n    var delta = endValue - startValue;\n    var direction = delta > 0 ? -1 /* Negative */ : delta < 0 ? 1 /* Positive */ : 0 /* Default */;\n    return direction;\n  };\n  var directionX = computeDirection(endPoint.x, startPoint.x);\n  var directionY = computeDirection(endPoint.y, startPoint.y);\n  var deltaX = currentPos.x - prePos.x;\n  var deltaY = currentPos.y - prePos.y;\n  return directionX * deltaX <= 0 && directionY * deltaY <= 0;\n};\nvar Transition = /** @class */function (_super) {\n  __extends(Transition, _super);\n  function Transition() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Transition.prototype.startProbe = function (startPoint, endPoint) {\n    var _this = this;\n    var prePos = startPoint;\n    var probe = function probe() {\n      var pos = _this.translater.getComputedPosition();\n      if (isValidPostion(startPoint, endPoint, pos, prePos)) {\n        _this.hooks.trigger(_this.hooks.eventTypes.move, pos);\n      }\n      // call bs.stop() should not dispatch end hook again.\n      // forceStop hook will do this.\n      /* istanbul ignore if  */\n      if (!_this.pending) {\n        if (_this.callStopWhenPending) {\n          _this.callStopWhenPending = false;\n        } else {\n          // transition ends should dispatch end hook.\n          _this.hooks.trigger(_this.hooks.eventTypes.end, pos);\n        }\n      }\n      prePos = pos;\n      if (_this.pending) {\n        _this.timer = requestAnimationFrame(probe);\n      }\n    };\n    // when manually call bs.stop(), then bs.scrollTo()\n    // we should reset callStopWhenPending to dispatch end hook\n    if (this.callStopWhenPending) {\n      this.setCallStop(false);\n    }\n    cancelAnimationFrame(this.timer);\n    probe();\n  };\n  Transition.prototype.transitionTime = function (time) {\n    if (time === void 0) {\n      time = 0;\n    }\n    this.style[style.transitionDuration] = time + 'ms';\n    this.hooks.trigger(this.hooks.eventTypes.time, time);\n  };\n  Transition.prototype.transitionTimingFunction = function (easing) {\n    this.style[style.transitionTimingFunction] = easing;\n    this.hooks.trigger(this.hooks.eventTypes.timeFunction, easing);\n  };\n  Transition.prototype.transitionProperty = function () {\n    this.style[style.transitionProperty] = style.transform;\n  };\n  Transition.prototype.move = function (startPoint, endPoint, time, easingFn) {\n    this.setPending(time > 0);\n    this.transitionTimingFunction(easingFn);\n    this.transitionProperty();\n    this.transitionTime(time);\n    this.translate(endPoint);\n    var isRealtimeProbeType = this.options.probeType === 3 /* Realtime */;\n    if (time && isRealtimeProbeType) {\n      this.startProbe(startPoint, endPoint);\n    }\n    // if we change content's transformY in a tick\n    // such as: 0 -> 50px -> 0\n    // transitionend will not be triggered\n    // so we forceupdate by reflow\n    if (!time) {\n      this._reflow = this.content.offsetHeight;\n      if (isRealtimeProbeType) {\n        this.hooks.trigger(this.hooks.eventTypes.move, endPoint);\n      }\n      this.hooks.trigger(this.hooks.eventTypes.end, endPoint);\n    }\n  };\n  Transition.prototype.doStop = function () {\n    var pending = this.pending;\n    this.setForceStopped(false);\n    this.setCallStop(false);\n    // still in transition\n    if (pending) {\n      this.setPending(false);\n      cancelAnimationFrame(this.timer);\n      var _a = this.translater.getComputedPosition(),\n        x = _a.x,\n        y = _a.y;\n      this.transitionTime();\n      this.translate({\n        x: x,\n        y: y\n      });\n      this.setForceStopped(true);\n      this.setCallStop(true);\n      this.hooks.trigger(this.hooks.eventTypes.forceStop, {\n        x: x,\n        y: y\n      });\n    }\n    return pending;\n  };\n  Transition.prototype.stop = function () {\n    var stopFromTransition = this.doStop();\n    if (stopFromTransition) {\n      this.hooks.trigger(this.hooks.eventTypes.callStop);\n    }\n  };\n  return Transition;\n}(Base);\nvar Animation = /** @class */function (_super) {\n  __extends(Animation, _super);\n  function Animation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Animation.prototype.move = function (startPoint, endPoint, time, easingFn) {\n    // time is 0\n    if (!time) {\n      this.translate(endPoint);\n      if (this.options.probeType === 3 /* Realtime */) {\n        this.hooks.trigger(this.hooks.eventTypes.move, endPoint);\n      }\n      this.hooks.trigger(this.hooks.eventTypes.end, endPoint);\n      return;\n    }\n    this.animate(startPoint, endPoint, time, easingFn);\n  };\n  Animation.prototype.animate = function (startPoint, endPoint, duration, easingFn) {\n    var _this = this;\n    var startTime = getNow();\n    var destTime = startTime + duration;\n    var isRealtimeProbeType = this.options.probeType === 3 /* Realtime */;\n    var step = function step() {\n      var now = getNow();\n      // js animation end\n      if (now >= destTime) {\n        _this.translate(endPoint);\n        if (isRealtimeProbeType) {\n          _this.hooks.trigger(_this.hooks.eventTypes.move, endPoint);\n        }\n        _this.hooks.trigger(_this.hooks.eventTypes.end, endPoint);\n        return;\n      }\n      now = (now - startTime) / duration;\n      var easing = easingFn(now);\n      var newPoint = {};\n      Object.keys(endPoint).forEach(function (key) {\n        var startValue = startPoint[key];\n        var endValue = endPoint[key];\n        newPoint[key] = (endValue - startValue) * easing + startValue;\n      });\n      _this.translate(newPoint);\n      if (isRealtimeProbeType) {\n        _this.hooks.trigger(_this.hooks.eventTypes.move, newPoint);\n      }\n      if (_this.pending) {\n        _this.timer = requestAnimationFrame(step);\n      }\n      // call bs.stop() should not dispatch end hook again.\n      // forceStop hook will do this.\n      /* istanbul ignore if  */\n      if (!_this.pending) {\n        if (_this.callStopWhenPending) {\n          _this.callStopWhenPending = false;\n        } else {\n          // raf ends should dispatch end hook.\n          _this.hooks.trigger(_this.hooks.eventTypes.end, endPoint);\n        }\n      }\n    };\n    this.setPending(true);\n    // when manually call bs.stop(), then bs.scrollTo()\n    // we should reset callStopWhenPending to dispatch end hook\n    if (this.callStopWhenPending) {\n      this.setCallStop(false);\n    }\n    cancelAnimationFrame(this.timer);\n    step();\n  };\n  Animation.prototype.doStop = function () {\n    var pending = this.pending;\n    this.setForceStopped(false);\n    this.setCallStop(false);\n    // still in requestFrameAnimation\n    if (pending) {\n      this.setPending(false);\n      cancelAnimationFrame(this.timer);\n      var pos = this.translater.getComputedPosition();\n      this.setForceStopped(true);\n      this.setCallStop(true);\n      this.hooks.trigger(this.hooks.eventTypes.forceStop, pos);\n    }\n    return pending;\n  };\n  Animation.prototype.stop = function () {\n    var stopFromAnimation = this.doStop();\n    if (stopFromAnimation) {\n      this.hooks.trigger(this.hooks.eventTypes.callStop);\n    }\n  };\n  return Animation;\n}(Base);\nfunction createAnimater(element, translater, options) {\n  var useTransition = options.useTransition;\n  var animaterOptions = {};\n  Object.defineProperty(animaterOptions, 'probeType', {\n    enumerable: true,\n    configurable: false,\n    get: function get() {\n      return options.probeType;\n    }\n  });\n  if (useTransition) {\n    return new Transition(element, translater, animaterOptions);\n  } else {\n    return new Animation(element, translater, animaterOptions);\n  }\n}\nvar Behavior = /** @class */function () {\n  function Behavior(wrapper, content, options) {\n    this.wrapper = wrapper;\n    this.options = options;\n    this.hooks = new EventEmitter(['beforeComputeBoundary', 'computeBoundary', 'momentum', 'end', 'ignoreHasScroll']);\n    this.refresh(content);\n  }\n  Behavior.prototype.start = function () {\n    this.dist = 0;\n    this.setMovingDirection(0 /* Default */);\n    this.setDirection(0 /* Default */);\n  };\n  Behavior.prototype.move = function (delta) {\n    delta = this.hasScroll ? delta : 0;\n    this.setMovingDirection(delta);\n    return this.performDampingAlgorithm(delta, this.options.outOfBoundaryDampingFactor);\n  };\n  Behavior.prototype.setMovingDirection = function (delta) {\n    this.movingDirection = delta > 0 ? -1 /* Negative */ : delta < 0 ? 1 /* Positive */ : 0 /* Default */;\n  };\n  Behavior.prototype.setDirection = function (delta) {\n    this.direction = delta > 0 ? -1 /* Negative */ : delta < 0 ? 1 /* Positive */ : 0 /* Default */;\n  };\n  Behavior.prototype.performDampingAlgorithm = function (delta, dampingFactor) {\n    var newPos = this.currentPos + delta;\n    // Slow down or stop if outside of the boundaries\n    if (newPos > this.minScrollPos || newPos < this.maxScrollPos) {\n      if (newPos > this.minScrollPos && this.options.bounces[0] || newPos < this.maxScrollPos && this.options.bounces[1]) {\n        newPos = this.currentPos + delta * dampingFactor;\n      } else {\n        newPos = newPos > this.minScrollPos ? this.minScrollPos : this.maxScrollPos;\n      }\n    }\n    return newPos;\n  };\n  Behavior.prototype.end = function (duration) {\n    var momentumInfo = {\n      duration: 0\n    };\n    var absDist = Math.abs(this.currentPos - this.startPos);\n    // start momentum animation if needed\n    if (this.options.momentum && duration < this.options.momentumLimitTime && absDist > this.options.momentumLimitDistance) {\n      var wrapperSize = this.direction === -1 /* Negative */ && this.options.bounces[0] || this.direction === 1 /* Positive */ && this.options.bounces[1] ? this.wrapperSize : 0;\n      momentumInfo = this.hasScroll ? this.momentum(this.currentPos, this.startPos, duration, this.maxScrollPos, this.minScrollPos, wrapperSize, this.options) : {\n        destination: this.currentPos,\n        duration: 0\n      };\n    } else {\n      this.hooks.trigger(this.hooks.eventTypes.end, momentumInfo);\n    }\n    return momentumInfo;\n  };\n  Behavior.prototype.momentum = function (current, start, time, lowerMargin, upperMargin, wrapperSize, options) {\n    if (options === void 0) {\n      options = this.options;\n    }\n    var distance = current - start;\n    var speed = Math.abs(distance) / time;\n    var deceleration = options.deceleration,\n      swipeBounceTime = options.swipeBounceTime,\n      swipeTime = options.swipeTime;\n    var duration = Math.min(swipeTime, speed * 2 / deceleration);\n    var momentumData = {\n      destination: current + speed * speed / deceleration * (distance < 0 ? -1 : 1),\n      duration: duration,\n      rate: 15\n    };\n    this.hooks.trigger(this.hooks.eventTypes.momentum, momentumData, distance);\n    if (momentumData.destination < lowerMargin) {\n      momentumData.destination = wrapperSize ? Math.max(lowerMargin - wrapperSize / 4, lowerMargin - wrapperSize / momentumData.rate * speed) : lowerMargin;\n      momentumData.duration = swipeBounceTime;\n    } else if (momentumData.destination > upperMargin) {\n      momentumData.destination = wrapperSize ? Math.min(upperMargin + wrapperSize / 4, upperMargin + wrapperSize / momentumData.rate * speed) : upperMargin;\n      momentumData.duration = swipeBounceTime;\n    }\n    momentumData.destination = Math.round(momentumData.destination);\n    return momentumData;\n  };\n  Behavior.prototype.updateDirection = function () {\n    var absDist = this.currentPos - this.absStartPos;\n    this.setDirection(absDist);\n  };\n  Behavior.prototype.refresh = function (content) {\n    var _a = this.options.rect,\n      size = _a.size,\n      position = _a.position;\n    var isWrapperStatic = window.getComputedStyle(this.wrapper, null).position === 'static';\n    // Force reflow\n    var wrapperRect = getRect(this.wrapper);\n    // use client is more fair than offset\n    this.wrapperSize = this.wrapper[size === 'width' ? 'clientWidth' : 'clientHeight'];\n    this.setContent(content);\n    var contentRect = getRect(this.content);\n    this.contentSize = contentRect[size];\n    this.relativeOffset = contentRect[position];\n    /* istanbul ignore if  */\n    if (isWrapperStatic) {\n      this.relativeOffset -= wrapperRect[position];\n    }\n    this.computeBoundary();\n    this.setDirection(0 /* Default */);\n  };\n  Behavior.prototype.setContent = function (content) {\n    if (content !== this.content) {\n      this.content = content;\n      this.resetState();\n    }\n  };\n  Behavior.prototype.resetState = function () {\n    this.currentPos = 0;\n    this.startPos = 0;\n    this.dist = 0;\n    this.setDirection(0 /* Default */);\n    this.setMovingDirection(0 /* Default */);\n    this.resetStartPos();\n  };\n  Behavior.prototype.computeBoundary = function () {\n    this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);\n    var boundary = {\n      minScrollPos: 0,\n      maxScrollPos: this.wrapperSize - this.contentSize\n    };\n    if (boundary.maxScrollPos < 0) {\n      boundary.maxScrollPos -= this.relativeOffset;\n      if (this.options.specifiedIndexAsContent === 0) {\n        boundary.minScrollPos = -this.relativeOffset;\n      }\n    }\n    this.hooks.trigger(this.hooks.eventTypes.computeBoundary, boundary);\n    this.minScrollPos = boundary.minScrollPos;\n    this.maxScrollPos = boundary.maxScrollPos;\n    this.hasScroll = this.options.scrollable && this.maxScrollPos < this.minScrollPos;\n    if (!this.hasScroll && this.minScrollPos < this.maxScrollPos) {\n      this.maxScrollPos = this.minScrollPos;\n      this.contentSize = this.wrapperSize;\n    }\n  };\n  Behavior.prototype.updatePosition = function (pos) {\n    this.currentPos = pos;\n  };\n  Behavior.prototype.getCurrentPos = function () {\n    return this.currentPos;\n  };\n  Behavior.prototype.checkInBoundary = function () {\n    var position = this.adjustPosition(this.currentPos);\n    var inBoundary = position === this.getCurrentPos();\n    return {\n      position: position,\n      inBoundary: inBoundary\n    };\n  };\n  // adjust position when out of boundary\n  Behavior.prototype.adjustPosition = function (pos) {\n    if (!this.hasScroll && !this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)) {\n      pos = this.minScrollPos;\n    } else if (pos > this.minScrollPos) {\n      pos = this.minScrollPos;\n    } else if (pos < this.maxScrollPos) {\n      pos = this.maxScrollPos;\n    }\n    return pos;\n  };\n  Behavior.prototype.updateStartPos = function () {\n    this.startPos = this.currentPos;\n  };\n  Behavior.prototype.updateAbsStartPos = function () {\n    this.absStartPos = this.currentPos;\n  };\n  Behavior.prototype.resetStartPos = function () {\n    this.updateStartPos();\n    this.updateAbsStartPos();\n  };\n  Behavior.prototype.getAbsDist = function (delta) {\n    this.dist += delta;\n    return Math.abs(this.dist);\n  };\n  Behavior.prototype.destroy = function () {\n    this.hooks.destroy();\n  };\n  return Behavior;\n}();\nvar _a, _b, _c, _d;\nvar PassthroughHandlers = (_a = {}, _a[\"yes\" /* Yes */] = function (e) {\n  return true;\n}, _a[\"no\" /* No */] = function (e) {\n  maybePrevent(e);\n  return false;\n}, _a);\nvar DirectionMap = (_b = {}, _b[\"horizontal\" /* Horizontal */] = (_c = {}, _c[\"yes\" /* Yes */] = \"horizontal\" /* Horizontal */, _c[\"no\" /* No */] = \"vertical\" /* Vertical */, _c), _b[\"vertical\" /* Vertical */] = (_d = {}, _d[\"yes\" /* Yes */] = \"vertical\" /* Vertical */, _d[\"no\" /* No */] = \"horizontal\" /* Horizontal */, _d), _b);\nvar DirectionLockAction = /** @class */function () {\n  function DirectionLockAction(directionLockThreshold, freeScroll, eventPassthrough) {\n    this.directionLockThreshold = directionLockThreshold;\n    this.freeScroll = freeScroll;\n    this.eventPassthrough = eventPassthrough;\n    this.reset();\n  }\n  DirectionLockAction.prototype.reset = function () {\n    this.directionLocked = \"\" /* Default */;\n  };\n  DirectionLockAction.prototype.checkMovingDirection = function (absDistX, absDistY, e) {\n    this.computeDirectionLock(absDistX, absDistY);\n    return this.handleEventPassthrough(e);\n  };\n  DirectionLockAction.prototype.adjustDelta = function (deltaX, deltaY) {\n    if (this.directionLocked === \"horizontal\" /* Horizontal */) {\n      deltaY = 0;\n    } else if (this.directionLocked === \"vertical\" /* Vertical */) {\n      deltaX = 0;\n    }\n    return {\n      deltaX: deltaX,\n      deltaY: deltaY\n    };\n  };\n  DirectionLockAction.prototype.computeDirectionLock = function (absDistX, absDistY) {\n    // If you are scrolling in one direction, lock it\n    if (this.directionLocked === \"\" /* Default */ && !this.freeScroll) {\n      if (absDistX > absDistY + this.directionLockThreshold) {\n        this.directionLocked = \"horizontal\" /* Horizontal */; // lock horizontally\n      } else if (absDistY >= absDistX + this.directionLockThreshold) {\n        this.directionLocked = \"vertical\" /* Vertical */; // lock vertically\n      } else {\n        this.directionLocked = \"none\" /* None */; // no lock\n      }\n    }\n  };\n  DirectionLockAction.prototype.handleEventPassthrough = function (e) {\n    var handleMap = DirectionMap[this.directionLocked];\n    if (handleMap) {\n      if (this.eventPassthrough === handleMap[\"yes\" /* Yes */]) {\n        return PassthroughHandlers[\"yes\" /* Yes */](e);\n      } else if (this.eventPassthrough === handleMap[\"no\" /* No */]) {\n        return PassthroughHandlers[\"no\" /* No */](e);\n      }\n    }\n    return false;\n  };\n  return DirectionLockAction;\n}();\nvar applyQuadrantTransformation = function applyQuadrantTransformation(deltaX, deltaY, quadrant) {\n  if (quadrant === 2 /* Second */) {\n    return [deltaY, -deltaX];\n  } else if (quadrant === 3 /* Third */) {\n    return [-deltaX, -deltaY];\n  } else if (quadrant === 4 /* Forth */) {\n    return [-deltaY, deltaX];\n  } else {\n    return [deltaX, deltaY];\n  }\n};\nvar ScrollerActions = /** @class */function () {\n  function ScrollerActions(scrollBehaviorX, scrollBehaviorY, actionsHandler, animater, options) {\n    this.hooks = new EventEmitter(['start', 'beforeMove', 'scrollStart', 'scroll', 'beforeEnd', 'end', 'scrollEnd', 'contentNotMoved', 'detectMovingDirection', 'coordinateTransformation']);\n    this.scrollBehaviorX = scrollBehaviorX;\n    this.scrollBehaviorY = scrollBehaviorY;\n    this.actionsHandler = actionsHandler;\n    this.animater = animater;\n    this.options = options;\n    this.directionLockAction = new DirectionLockAction(options.directionLockThreshold, options.freeScroll, options.eventPassthrough);\n    this.enabled = true;\n    this.bindActionsHandler();\n  }\n  ScrollerActions.prototype.bindActionsHandler = function () {\n    var _this = this;\n    // [mouse|touch]start event\n    this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start, function (e) {\n      if (!_this.enabled) return true;\n      return _this.handleStart(e);\n    });\n    // [mouse|touch]move event\n    this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move, function (_a) {\n      var deltaX = _a.deltaX,\n        deltaY = _a.deltaY,\n        e = _a.e;\n      if (!_this.enabled) return true;\n      var _b = applyQuadrantTransformation(deltaX, deltaY, _this.options.quadrant),\n        transformateDeltaX = _b[0],\n        transformateDeltaY = _b[1];\n      var transformateDeltaData = {\n        deltaX: transformateDeltaX,\n        deltaY: transformateDeltaY\n      };\n      _this.hooks.trigger(_this.hooks.eventTypes.coordinateTransformation, transformateDeltaData);\n      return _this.handleMove(transformateDeltaData.deltaX, transformateDeltaData.deltaY, e);\n    });\n    // [mouse|touch]end event\n    this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end, function (e) {\n      if (!_this.enabled) return true;\n      return _this.handleEnd(e);\n    });\n    // click\n    this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click, function (e) {\n      // handle native click event\n      if (_this.enabled && !e._constructed) {\n        _this.handleClick(e);\n      }\n    });\n  };\n  ScrollerActions.prototype.handleStart = function (e) {\n    var timestamp = getNow();\n    this.fingerMoved = false;\n    this.contentMoved = false;\n    this.startTime = timestamp;\n    this.directionLockAction.reset();\n    this.scrollBehaviorX.start();\n    this.scrollBehaviorY.start();\n    // force stopping last transition or animation\n    this.animater.doStop();\n    this.scrollBehaviorX.resetStartPos();\n    this.scrollBehaviorY.resetStartPos();\n    this.hooks.trigger(this.hooks.eventTypes.start, e);\n  };\n  ScrollerActions.prototype.handleMove = function (deltaX, deltaY, e) {\n    if (this.hooks.trigger(this.hooks.eventTypes.beforeMove, e)) {\n      return;\n    }\n    var absDistX = this.scrollBehaviorX.getAbsDist(deltaX);\n    var absDistY = this.scrollBehaviorY.getAbsDist(deltaY);\n    var timestamp = getNow();\n    // We need to move at least momentumLimitDistance pixels\n    // for the scrolling to initiate\n    if (this.checkMomentum(absDistX, absDistY, timestamp)) {\n      return true;\n    }\n    if (this.directionLockAction.checkMovingDirection(absDistX, absDistY, e)) {\n      this.actionsHandler.setInitiated();\n      return true;\n    }\n    var delta = this.directionLockAction.adjustDelta(deltaX, deltaY);\n    var prevX = this.scrollBehaviorX.getCurrentPos();\n    var newX = this.scrollBehaviorX.move(delta.deltaX);\n    var prevY = this.scrollBehaviorY.getCurrentPos();\n    var newY = this.scrollBehaviorY.move(delta.deltaY);\n    if (this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)) {\n      return;\n    }\n    if (!this.fingerMoved) {\n      this.fingerMoved = true;\n    }\n    var positionChanged = newX !== prevX || newY !== prevY;\n    if (!this.contentMoved && !positionChanged) {\n      this.hooks.trigger(this.hooks.eventTypes.contentNotMoved);\n    }\n    if (!this.contentMoved && positionChanged) {\n      this.contentMoved = true;\n      this.hooks.trigger(this.hooks.eventTypes.scrollStart);\n    }\n    if (this.contentMoved && positionChanged) {\n      this.animater.translate({\n        x: newX,\n        y: newY\n      });\n      this.dispatchScroll(timestamp);\n    }\n  };\n  ScrollerActions.prototype.dispatchScroll = function (timestamp) {\n    // dispatch scroll in interval time\n    if (timestamp - this.startTime > this.options.momentumLimitTime) {\n      // refresh time and starting position to initiate a momentum\n      this.startTime = timestamp;\n      this.scrollBehaviorX.updateStartPos();\n      this.scrollBehaviorY.updateStartPos();\n      if (this.options.probeType === 1 /* Throttle */) {\n        this.hooks.trigger(this.hooks.eventTypes.scroll, this.getCurrentPos());\n      }\n    }\n    // dispatch scroll all the time\n    if (this.options.probeType > 1 /* Throttle */) {\n      this.hooks.trigger(this.hooks.eventTypes.scroll, this.getCurrentPos());\n    }\n  };\n  ScrollerActions.prototype.checkMomentum = function (absDistX, absDistY, timestamp) {\n    return timestamp - this.endTime > this.options.momentumLimitTime && absDistY < this.options.momentumLimitDistance && absDistX < this.options.momentumLimitDistance;\n  };\n  ScrollerActions.prototype.handleEnd = function (e) {\n    if (this.hooks.trigger(this.hooks.eventTypes.beforeEnd, e)) {\n      return;\n    }\n    var currentPos = this.getCurrentPos();\n    this.scrollBehaviorX.updateDirection();\n    this.scrollBehaviorY.updateDirection();\n    if (this.hooks.trigger(this.hooks.eventTypes.end, e, currentPos)) {\n      return true;\n    }\n    currentPos = this.ensureIntegerPos(currentPos);\n    this.animater.translate(currentPos);\n    this.endTime = getNow();\n    var duration = this.endTime - this.startTime;\n    this.hooks.trigger(this.hooks.eventTypes.scrollEnd, currentPos, duration);\n  };\n  ScrollerActions.prototype.ensureIntegerPos = function (currentPos) {\n    this.ensuringInteger = true;\n    var x = currentPos.x,\n      y = currentPos.y;\n    var _a = this.scrollBehaviorX,\n      minScrollPosX = _a.minScrollPos,\n      maxScrollPosX = _a.maxScrollPos;\n    var _b = this.scrollBehaviorY,\n      minScrollPosY = _b.minScrollPos,\n      maxScrollPosY = _b.maxScrollPos;\n    x = x > 0 ? Math.ceil(x) : Math.floor(x);\n    y = y > 0 ? Math.ceil(y) : Math.floor(y);\n    x = between(x, maxScrollPosX, minScrollPosX);\n    y = between(y, maxScrollPosY, minScrollPosY);\n    return {\n      x: x,\n      y: y\n    };\n  };\n  ScrollerActions.prototype.handleClick = function (e) {\n    if (!preventDefaultExceptionFn(e.target, this.options.preventDefaultException)) {\n      maybePrevent(e);\n      e.stopPropagation();\n    }\n  };\n  ScrollerActions.prototype.getCurrentPos = function () {\n    return {\n      x: this.scrollBehaviorX.getCurrentPos(),\n      y: this.scrollBehaviorY.getCurrentPos()\n    };\n  };\n  ScrollerActions.prototype.refresh = function () {\n    this.endTime = 0;\n  };\n  ScrollerActions.prototype.destroy = function () {\n    this.hooks.destroy();\n  };\n  return ScrollerActions;\n}();\nfunction createActionsHandlerOptions(bsOptions) {\n  var options = ['click', 'bindToWrapper', 'disableMouse', 'disableTouch', 'preventDefault', 'stopPropagation', 'tagException', 'preventDefaultException', 'autoEndDistance'].reduce(function (prev, cur) {\n    prev[cur] = bsOptions[cur];\n    return prev;\n  }, {});\n  return options;\n}\nfunction createBehaviorOptions(bsOptions, extraProp, bounces, rect) {\n  var options = ['momentum', 'momentumLimitTime', 'momentumLimitDistance', 'deceleration', 'swipeBounceTime', 'swipeTime', 'outOfBoundaryDampingFactor', 'specifiedIndexAsContent'].reduce(function (prev, cur) {\n    prev[cur] = bsOptions[cur];\n    return prev;\n  }, {});\n  // add extra property\n  options.scrollable = !!bsOptions[extraProp];\n  options.bounces = bounces;\n  options.rect = rect;\n  return options;\n}\nfunction bubbling(source, target, events) {\n  events.forEach(function (event) {\n    var sourceEvent;\n    var targetEvent;\n    if (typeof event === 'string') {\n      sourceEvent = targetEvent = event;\n    } else {\n      sourceEvent = event.source;\n      targetEvent = event.target;\n    }\n    source.on(sourceEvent, function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return target.trigger.apply(target, __spreadArrays([targetEvent], args));\n    });\n  });\n}\nfunction isSamePoint(startPoint, endPoint) {\n  // keys of startPoint and endPoint should be equal\n  var keys = Object.keys(startPoint);\n  for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n    var key = keys_1[_i];\n    if (startPoint[key] !== endPoint[key]) return false;\n  }\n  return true;\n}\nvar MIN_SCROLL_DISTANCE = 1;\nvar Scroller = /** @class */function () {\n  function Scroller(wrapper, content, options) {\n    this.wrapper = wrapper;\n    this.content = content;\n    this.resizeTimeout = 0;\n    this.hooks = new EventEmitter(['beforeStart', 'beforeMove', 'beforeScrollStart', 'scrollStart', 'scroll', 'beforeEnd', 'scrollEnd', 'resize', 'touchEnd', 'end', 'flick', 'scrollCancel', 'momentum', 'scrollTo', 'minDistanceScroll', 'scrollToElement', 'beforeRefresh']);\n    this.options = options;\n    var _a = this.options.bounce,\n      left = _a.left,\n      right = _a.right,\n      top = _a.top,\n      bottom = _a.bottom;\n    // direction X\n    this.scrollBehaviorX = new Behavior(wrapper, content, createBehaviorOptions(options, 'scrollX', [left, right], {\n      size: 'width',\n      position: 'left'\n    }));\n    // direction Y\n    this.scrollBehaviorY = new Behavior(wrapper, content, createBehaviorOptions(options, 'scrollY', [top, bottom], {\n      size: 'height',\n      position: 'top'\n    }));\n    this.translater = new Translater(this.content);\n    this.animater = createAnimater(this.content, this.translater, this.options);\n    this.actionsHandler = new ActionsHandler(this.options.bindToTarget ? this.content : wrapper, createActionsHandlerOptions(this.options));\n    this.actions = new ScrollerActions(this.scrollBehaviorX, this.scrollBehaviorY, this.actionsHandler, this.animater, this.options);\n    var resizeHandler = this.resize.bind(this);\n    this.resizeRegister = new EventRegister(window, [{\n      name: 'orientationchange',\n      handler: resizeHandler\n    }, {\n      name: 'resize',\n      handler: resizeHandler\n    }]);\n    this.registerTransitionEnd();\n    this.init();\n  }\n  Scroller.prototype.init = function () {\n    var _this = this;\n    this.bindTranslater();\n    this.bindAnimater();\n    this.bindActions();\n    // enable pointer events when scrolling ends\n    this.hooks.on(this.hooks.eventTypes.scrollEnd, function () {\n      _this.togglePointerEvents(true);\n    });\n  };\n  Scroller.prototype.registerTransitionEnd = function () {\n    this.transitionEndRegister = new EventRegister(this.content, [{\n      name: style.transitionEnd,\n      handler: this.transitionEnd.bind(this)\n    }]);\n  };\n  Scroller.prototype.bindTranslater = function () {\n    var _this = this;\n    var hooks = this.translater.hooks;\n    hooks.on(hooks.eventTypes.beforeTranslate, function (transformStyle) {\n      if (_this.options.translateZ) {\n        transformStyle.push(_this.options.translateZ);\n      }\n    });\n    // disable pointer events when scrolling\n    hooks.on(hooks.eventTypes.translate, function (pos) {\n      var prevPos = _this.getCurrentPos();\n      _this.updatePositions(pos);\n      // scrollEnd will dispatch when scroll is force stopping in touchstart handler\n      // so in touchend handler, don't toggle pointer-events\n      if (_this.actions.ensuringInteger === true) {\n        _this.actions.ensuringInteger = false;\n        return;\n      }\n      // a valid translate\n      if (pos.x !== prevPos.x || pos.y !== prevPos.y) {\n        _this.togglePointerEvents(false);\n      }\n    });\n  };\n  Scroller.prototype.bindAnimater = function () {\n    var _this = this;\n    // reset position\n    this.animater.hooks.on(this.animater.hooks.eventTypes.end, function (pos) {\n      if (!_this.resetPosition(_this.options.bounceTime)) {\n        _this.animater.setPending(false);\n        _this.hooks.trigger(_this.hooks.eventTypes.scrollEnd, pos);\n      }\n    });\n    bubbling(this.animater.hooks, this.hooks, [{\n      source: this.animater.hooks.eventTypes.move,\n      target: this.hooks.eventTypes.scroll\n    }, {\n      source: this.animater.hooks.eventTypes.forceStop,\n      target: this.hooks.eventTypes.scrollEnd\n    }]);\n  };\n  Scroller.prototype.bindActions = function () {\n    var _this = this;\n    var actions = this.actions;\n    bubbling(actions.hooks, this.hooks, [{\n      source: actions.hooks.eventTypes.start,\n      target: this.hooks.eventTypes.beforeStart\n    }, {\n      source: actions.hooks.eventTypes.start,\n      target: this.hooks.eventTypes.beforeScrollStart\n    }, {\n      source: actions.hooks.eventTypes.beforeMove,\n      target: this.hooks.eventTypes.beforeMove\n    }, {\n      source: actions.hooks.eventTypes.scrollStart,\n      target: this.hooks.eventTypes.scrollStart\n    }, {\n      source: actions.hooks.eventTypes.scroll,\n      target: this.hooks.eventTypes.scroll\n    }, {\n      source: actions.hooks.eventTypes.beforeEnd,\n      target: this.hooks.eventTypes.beforeEnd\n    }]);\n    actions.hooks.on(actions.hooks.eventTypes.end, function (e, pos) {\n      _this.hooks.trigger(_this.hooks.eventTypes.touchEnd, pos);\n      if (_this.hooks.trigger(_this.hooks.eventTypes.end, pos)) {\n        return true;\n      }\n      // check if it is a click operation\n      if (!actions.fingerMoved) {\n        _this.hooks.trigger(_this.hooks.eventTypes.scrollCancel);\n        if (_this.checkClick(e)) {\n          return true;\n        }\n      }\n      // reset if we are outside of the boundaries\n      if (_this.resetPosition(_this.options.bounceTime, ease.bounce)) {\n        _this.animater.setForceStopped(false);\n        return true;\n      }\n    });\n    actions.hooks.on(actions.hooks.eventTypes.scrollEnd, function (pos, duration) {\n      var deltaX = Math.abs(pos.x - _this.scrollBehaviorX.startPos);\n      var deltaY = Math.abs(pos.y - _this.scrollBehaviorY.startPos);\n      if (_this.checkFlick(duration, deltaX, deltaY)) {\n        _this.animater.setForceStopped(false);\n        _this.hooks.trigger(_this.hooks.eventTypes.flick);\n        return;\n      }\n      if (_this.momentum(pos, duration)) {\n        _this.animater.setForceStopped(false);\n        return;\n      }\n      if (actions.contentMoved) {\n        _this.hooks.trigger(_this.hooks.eventTypes.scrollEnd, pos);\n      }\n      if (_this.animater.forceStopped) {\n        _this.animater.setForceStopped(false);\n      }\n    });\n  };\n  Scroller.prototype.checkFlick = function (duration, deltaX, deltaY) {\n    var flickMinMovingDistance = 1; // distinguish flick from click\n    if (this.hooks.events.flick.length > 1 && duration < this.options.flickLimitTime && deltaX < this.options.flickLimitDistance && deltaY < this.options.flickLimitDistance && (deltaY > flickMinMovingDistance || deltaX > flickMinMovingDistance)) {\n      return true;\n    }\n  };\n  Scroller.prototype.momentum = function (pos, duration) {\n    var meta = {\n      time: 0,\n      easing: ease.swiper,\n      newX: pos.x,\n      newY: pos.y\n    };\n    // start momentum animation if needed\n    var momentumX = this.scrollBehaviorX.end(duration);\n    var momentumY = this.scrollBehaviorY.end(duration);\n    meta.newX = isUndef(momentumX.destination) ? meta.newX : momentumX.destination;\n    meta.newY = isUndef(momentumY.destination) ? meta.newY : momentumY.destination;\n    meta.time = Math.max(momentumX.duration, momentumY.duration);\n    this.hooks.trigger(this.hooks.eventTypes.momentum, meta, this);\n    // when x or y changed, do momentum animation now!\n    if (meta.newX !== pos.x || meta.newY !== pos.y) {\n      // change easing function when scroller goes out of the boundaries\n      if (meta.newX > this.scrollBehaviorX.minScrollPos || meta.newX < this.scrollBehaviorX.maxScrollPos || meta.newY > this.scrollBehaviorY.minScrollPos || meta.newY < this.scrollBehaviorY.maxScrollPos) {\n        meta.easing = ease.swipeBounce;\n      }\n      this.scrollTo(meta.newX, meta.newY, meta.time, meta.easing);\n      return true;\n    }\n  };\n  Scroller.prototype.checkClick = function (e) {\n    var cancelable = {\n      preventClick: this.animater.forceStopped\n    };\n    // we scrolled less than momentumLimitDistance pixels\n    if (this.hooks.trigger(this.hooks.eventTypes.checkClick)) {\n      this.animater.setForceStopped(false);\n      return true;\n    }\n    if (!cancelable.preventClick) {\n      var _dblclick = this.options.dblclick;\n      var dblclickTrigged = false;\n      if (_dblclick && this.lastClickTime) {\n        var _a = _dblclick.delay,\n          delay = _a === void 0 ? 300 : _a;\n        if (getNow() - this.lastClickTime < delay) {\n          dblclickTrigged = true;\n          dblclick(e);\n        }\n      }\n      if (this.options.tap) {\n        tap(e, this.options.tap);\n      }\n      if (this.options.click && !preventDefaultExceptionFn(e.target, this.options.preventDefaultException)) {\n        click(e);\n      }\n      this.lastClickTime = dblclickTrigged ? null : getNow();\n      return true;\n    }\n    return false;\n  };\n  Scroller.prototype.resize = function () {\n    var _this = this;\n    if (!this.actions.enabled) {\n      return;\n    }\n    // fix a scroll problem under Android condition\n    /* istanbul ignore if  */\n    if (isAndroid) {\n      this.wrapper.scrollTop = 0;\n    }\n    clearTimeout(this.resizeTimeout);\n    this.resizeTimeout = window.setTimeout(function () {\n      _this.hooks.trigger(_this.hooks.eventTypes.resize);\n    }, this.options.resizePolling);\n  };\n  /* istanbul ignore next */\n  Scroller.prototype.transitionEnd = function (e) {\n    if (e.target !== this.content || !this.animater.pending) {\n      return;\n    }\n    var animater = this.animater;\n    animater.transitionTime();\n    if (!this.resetPosition(this.options.bounceTime, ease.bounce)) {\n      this.animater.setPending(false);\n      if (this.options.probeType !== 3 /* Realtime */) {\n        this.hooks.trigger(this.hooks.eventTypes.scrollEnd, this.getCurrentPos());\n      }\n    }\n  };\n  Scroller.prototype.togglePointerEvents = function (enabled) {\n    if (enabled === void 0) {\n      enabled = true;\n    }\n    var el = this.content.children.length ? this.content.children : [this.content];\n    var pointerEvents = enabled ? 'auto' : 'none';\n    for (var i = 0; i < el.length; i++) {\n      var node = el[i];\n      // ignore BetterScroll instance's wrapper DOM\n      /* istanbul ignore if  */\n      if (node.isBScrollContainer) {\n        continue;\n      }\n      node.style.pointerEvents = pointerEvents;\n    }\n  };\n  Scroller.prototype.refresh = function (content) {\n    var contentChanged = this.setContent(content);\n    this.hooks.trigger(this.hooks.eventTypes.beforeRefresh);\n    this.scrollBehaviorX.refresh(content);\n    this.scrollBehaviorY.refresh(content);\n    if (contentChanged) {\n      this.translater.setContent(content);\n      this.animater.setContent(content);\n      this.transitionEndRegister.destroy();\n      this.registerTransitionEnd();\n      if (this.options.bindToTarget) {\n        this.actionsHandler.setContent(content);\n      }\n    }\n    this.actions.refresh();\n    this.wrapperOffset = offset(this.wrapper);\n  };\n  Scroller.prototype.setContent = function (content) {\n    var contentChanged = content !== this.content;\n    if (contentChanged) {\n      this.content = content;\n    }\n    return contentChanged;\n  };\n  Scroller.prototype.scrollBy = function (deltaX, deltaY, time, easing) {\n    if (time === void 0) {\n      time = 0;\n    }\n    var _a = this.getCurrentPos(),\n      x = _a.x,\n      y = _a.y;\n    easing = !easing ? ease.bounce : easing;\n    deltaX += x;\n    deltaY += y;\n    this.scrollTo(deltaX, deltaY, time, easing);\n  };\n  Scroller.prototype.scrollTo = function (x, y, time, easing, extraTransform) {\n    if (time === void 0) {\n      time = 0;\n    }\n    if (easing === void 0) {\n      easing = ease.bounce;\n    }\n    if (extraTransform === void 0) {\n      extraTransform = {\n        start: {},\n        end: {}\n      };\n    }\n    var easingFn = this.options.useTransition ? easing.style : easing.fn;\n    var currentPos = this.getCurrentPos();\n    var startPoint = _assign({\n      x: currentPos.x,\n      y: currentPos.y\n    }, extraTransform.start);\n    var endPoint = _assign({\n      x: x,\n      y: y\n    }, extraTransform.end);\n    this.hooks.trigger(this.hooks.eventTypes.scrollTo, endPoint);\n    // it is an useless move\n    if (isSamePoint(startPoint, endPoint)) return;\n    var deltaX = Math.abs(endPoint.x - startPoint.x);\n    var deltaY = Math.abs(endPoint.y - startPoint.y);\n    // considering of browser compatibility for decimal transform value\n    // force translating immediately\n    if (deltaX < MIN_SCROLL_DISTANCE && deltaY < MIN_SCROLL_DISTANCE) {\n      time = 0;\n      this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll);\n    }\n    this.animater.move(startPoint, endPoint, time, easingFn);\n  };\n  Scroller.prototype.scrollToElement = function (el, time, offsetX, offsetY, easing) {\n    var targetEle = getElement(el);\n    var pos = offset(targetEle);\n    var getOffset = function getOffset(offset, size, wrapperSize) {\n      if (typeof offset === 'number') {\n        return offset;\n      }\n      // if offsetX/Y are true we center the element to the screen\n      return offset ? Math.round(size / 2 - wrapperSize / 2) : 0;\n    };\n    offsetX = getOffset(offsetX, targetEle.offsetWidth, this.wrapper.offsetWidth);\n    offsetY = getOffset(offsetY, targetEle.offsetHeight, this.wrapper.offsetHeight);\n    var getPos = function getPos(pos, wrapperPos, offset, scrollBehavior) {\n      pos -= wrapperPos;\n      pos = scrollBehavior.adjustPosition(pos - offset);\n      return pos;\n    };\n    pos.left = getPos(pos.left, this.wrapperOffset.left, offsetX, this.scrollBehaviorX);\n    pos.top = getPos(pos.top, this.wrapperOffset.top, offsetY, this.scrollBehaviorY);\n    if (this.hooks.trigger(this.hooks.eventTypes.scrollToElement, targetEle, pos)) {\n      return;\n    }\n    this.scrollTo(pos.left, pos.top, time, easing);\n  };\n  Scroller.prototype.resetPosition = function (time, easing) {\n    if (time === void 0) {\n      time = 0;\n    }\n    if (easing === void 0) {\n      easing = ease.bounce;\n    }\n    var _a = this.scrollBehaviorX.checkInBoundary(),\n      x = _a.position,\n      xInBoundary = _a.inBoundary;\n    var _b = this.scrollBehaviorY.checkInBoundary(),\n      y = _b.position,\n      yInBoundary = _b.inBoundary;\n    if (xInBoundary && yInBoundary) {\n      return false;\n    }\n    /* istanbul ignore if  */\n    if (isIOSBadVersion) {\n      // fix ios 13.4 bouncing\n      // see it in issues 982\n      this.reflow();\n    }\n    // out of boundary\n    this.scrollTo(x, y, time, easing);\n    return true;\n  };\n  /* istanbul ignore next */\n  Scroller.prototype.reflow = function () {\n    this._reflow = this.content.offsetHeight;\n  };\n  Scroller.prototype.updatePositions = function (pos) {\n    this.scrollBehaviorX.updatePosition(pos.x);\n    this.scrollBehaviorY.updatePosition(pos.y);\n  };\n  Scroller.prototype.getCurrentPos = function () {\n    return this.actions.getCurrentPos();\n  };\n  Scroller.prototype.enable = function () {\n    this.actions.enabled = true;\n  };\n  Scroller.prototype.disable = function () {\n    cancelAnimationFrame(this.animater.timer);\n    this.actions.enabled = false;\n  };\n  Scroller.prototype.destroy = function () {\n    var _this = this;\n    var keys = ['resizeRegister', 'transitionEndRegister', 'actionsHandler', 'actions', 'hooks', 'animater', 'translater', 'scrollBehaviorX', 'scrollBehaviorY'];\n    keys.forEach(function (key) {\n      return _this[key].destroy();\n    });\n  };\n  return Scroller;\n}();\nvar BScrollConstructor = /** @class */function (_super) {\n  __extends(BScrollConstructor, _super);\n  function BScrollConstructor(el, options) {\n    var _this = _super.call(this, ['refresh', 'contentChanged', 'enable', 'disable', 'beforeScrollStart', 'scrollStart', 'scroll', 'scrollEnd', 'scrollCancel', 'touchEnd', 'flick', 'destroy']) || this;\n    var wrapper = getElement(el);\n    if (!wrapper) {\n      warn('Can not resolve the wrapper DOM.');\n      return _this;\n    }\n    _this.plugins = {};\n    _this.options = new OptionsConstructor().merge(options).process();\n    if (!_this.setContent(wrapper).valid) {\n      return _this;\n    }\n    _this.hooks = new EventEmitter(['refresh', 'enable', 'disable', 'destroy', 'beforeInitialScrollTo', 'contentChanged']);\n    _this.init(wrapper);\n    return _this;\n  }\n  BScrollConstructor.use = function (ctor) {\n    var name = ctor.pluginName;\n    var installed = BScrollConstructor.plugins.some(function (plugin) {\n      return ctor === plugin.ctor;\n    });\n    if (installed) return BScrollConstructor;\n    if (isUndef(name)) {\n      warn(\"Plugin Class must specify plugin's name in static property by 'pluginName' field.\");\n      return BScrollConstructor;\n    }\n    BScrollConstructor.pluginsMap[name] = true;\n    BScrollConstructor.plugins.push({\n      name: name,\n      applyOrder: ctor.applyOrder,\n      ctor: ctor\n    });\n    return BScrollConstructor;\n  };\n  BScrollConstructor.prototype.setContent = function (wrapper) {\n    var contentChanged = false;\n    var valid = true;\n    var content = wrapper.children[this.options.specifiedIndexAsContent];\n    if (!content) {\n      warn('The wrapper need at least one child element to be content element to scroll.');\n      valid = false;\n    } else {\n      contentChanged = this.content !== content;\n      if (contentChanged) {\n        this.content = content;\n      }\n    }\n    return {\n      valid: valid,\n      contentChanged: contentChanged\n    };\n  };\n  BScrollConstructor.prototype.init = function (wrapper) {\n    var _this = this;\n    this.wrapper = wrapper;\n    // mark wrapper to recognize bs instance by DOM attribute\n    wrapper.isBScrollContainer = true;\n    this.scroller = new Scroller(wrapper, this.content, this.options);\n    this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize, function () {\n      _this.refresh();\n    });\n    this.eventBubbling();\n    this.handleAutoBlur();\n    this.enable();\n    this.proxy(propertiesConfig);\n    this.applyPlugins();\n    // maybe boundary has changed, should refresh\n    this.refreshWithoutReset(this.content);\n    var _a = this.options,\n      startX = _a.startX,\n      startY = _a.startY;\n    var position = {\n      x: startX,\n      y: startY\n    };\n    // maybe plugins want to control scroll position\n    if (this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo, position)) {\n      return;\n    }\n    this.scroller.scrollTo(position.x, position.y);\n  };\n  BScrollConstructor.prototype.applyPlugins = function () {\n    var _this = this;\n    var options = this.options;\n    BScrollConstructor.plugins.sort(function (a, b) {\n      var _a;\n      var applyOrderMap = (_a = {}, _a[\"pre\" /* Pre */] = -1, _a[\"post\" /* Post */] = 1, _a);\n      var aOrder = a.applyOrder ? applyOrderMap[a.applyOrder] : 0;\n      var bOrder = b.applyOrder ? applyOrderMap[b.applyOrder] : 0;\n      return aOrder - bOrder;\n    }).forEach(function (item) {\n      var ctor = item.ctor;\n      if (options[item.name] && typeof ctor === 'function') {\n        _this.plugins[item.name] = new ctor(_this);\n      }\n    });\n  };\n  BScrollConstructor.prototype.handleAutoBlur = function () {\n    /* istanbul ignore if  */\n    if (this.options.autoBlur) {\n      this.on(this.eventTypes.beforeScrollStart, function () {\n        var activeElement = document.activeElement;\n        if (activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA')) {\n          activeElement.blur();\n        }\n      });\n    }\n  };\n  BScrollConstructor.prototype.eventBubbling = function () {\n    bubbling(this.scroller.hooks, this, [this.eventTypes.beforeScrollStart, this.eventTypes.scrollStart, this.eventTypes.scroll, this.eventTypes.scrollEnd, this.eventTypes.scrollCancel, this.eventTypes.touchEnd, this.eventTypes.flick]);\n  };\n  BScrollConstructor.prototype.refreshWithoutReset = function (content) {\n    this.scroller.refresh(content);\n    this.hooks.trigger(this.hooks.eventTypes.refresh, content);\n    this.trigger(this.eventTypes.refresh, content);\n  };\n  BScrollConstructor.prototype.proxy = function (propertiesConfig) {\n    var _this = this;\n    propertiesConfig.forEach(function (_a) {\n      var key = _a.key,\n        sourceKey = _a.sourceKey;\n      propertiesProxy(_this, sourceKey, key);\n    });\n  };\n  BScrollConstructor.prototype.refresh = function () {\n    var _a = this.setContent(this.wrapper),\n      contentChanged = _a.contentChanged,\n      valid = _a.valid;\n    if (valid) {\n      var content = this.content;\n      this.refreshWithoutReset(content);\n      if (contentChanged) {\n        this.hooks.trigger(this.hooks.eventTypes.contentChanged, content);\n        this.trigger(this.eventTypes.contentChanged, content);\n      }\n      this.scroller.resetPosition();\n    }\n  };\n  BScrollConstructor.prototype.enable = function () {\n    this.scroller.enable();\n    this.hooks.trigger(this.hooks.eventTypes.enable);\n    this.trigger(this.eventTypes.enable);\n  };\n  BScrollConstructor.prototype.disable = function () {\n    this.scroller.disable();\n    this.hooks.trigger(this.hooks.eventTypes.disable);\n    this.trigger(this.eventTypes.disable);\n  };\n  BScrollConstructor.prototype.destroy = function () {\n    this.hooks.trigger(this.hooks.eventTypes.destroy);\n    this.trigger(this.eventTypes.destroy);\n    this.scroller.destroy();\n  };\n  BScrollConstructor.prototype.eventRegister = function (names) {\n    this.registerType(names);\n  };\n  BScrollConstructor.plugins = [];\n  BScrollConstructor.pluginsMap = {};\n  return BScrollConstructor;\n}(EventEmitter);\nfunction createBScroll(el, options) {\n  var bs = new BScrollConstructor(el, options);\n  return bs;\n}\ncreateBScroll.use = BScrollConstructor.use;\ncreateBScroll.plugins = BScrollConstructor.plugins;\ncreateBScroll.pluginsMap = BScrollConstructor.pluginsMap;\nvar BScroll = createBScroll;\nexport { Behavior, CustomOptions, createBScroll, BScroll as default };","map":{"version":3,"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__spreadArrays","il","r","k","a","j","jl","propertiesConfig","sourceKey","key","warn","msg","console","error","inBrowser","window","ua","navigator","userAgent","toLowerCase","isWeChatDevTools","test","isAndroid","indexOf","isIOSBadVersion","regex","matches","exec","parts","split","map","item","parseInt","supportsPassive","EventName","opts","defineProperty","get","addEventListener","e","getNow","performance","now","timing","navigationStart","Date","extend","target","source","isUndef","v","undefined","between","x","min","max","elementStyle","document","createElement","style","vendor","transformNames","value","_i","transformNames_1","obj","prefixStyle","charAt","toUpperCase","substr","getElement","el","querySelector","addEvent","type","fn","capture","useCapture","passive","removeEvent","removeEventListener","maybePrevent","cancelable","preventDefault","offset","left","top","offsetLeft","offsetTop","offsetParent","transform","transition","hasPerspective","hasTouch","hasTransition","transitionTimingFunction","transitionDuration","transitionDelay","transformOrigin","transitionEnd","transitionProperty","eventTypeMap","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseup","getRect","SVGElement","rect","getBoundingClientRect","width","height","offsetWidth","offsetHeight","preventDefaultExceptionFn","exceptions","tagExceptionFn","tap","eventName","ev","createEvent","initEvent","pageX","pageY","dispatchEvent","click","event","eventSource","changedTouches","posSrc","screenX","screenY","clientX","clientY","bubbles","ctrlKey","shiftKey","altKey","metaKey","pressedKeysMap","MouseEvent","forwardedTouchEvent","_constructed","dblclick","ease","swipe","swipeBounce","bounce","DEFAULT_INTERVAL","windowCompat","noop$1","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","interval","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","id","clearTimeout","noop","val","sharedPropertyDefinition","enumerable","configurable","set","getProperty","keys","_typeof","lastKey","pop","setProperty","temp","propertiesProxy","proxyGetter","proxySetter","EventEmitter","names","events","eventTypes","registerType","on","context","hasType","push","once","_this","magic","args","off","ret","count","splice","trigger","len","eventsCopy","event_1","forEach","destroy","types","isType","_","JSON","stringify","EventRegister","wrapper","addDOMEvents","removeDOMEvents","handleDOMEvents","eventOperation","name","handleEvent","eventType","some","handler","CustomOptions","OptionsConstructor","_super","startX","startY","scrollX","scrollY","freeScroll","directionLockThreshold","eventPassthrough","bottom","right","bounceTime","momentum","momentumLimitTime","momentumLimitDistance","swipeTime","swipeBounceTime","deceleration","flickLimitTime","flickLimitDistance","resizePolling","probeType","stopPropagation","preventDefaultException","tagName","tagException","HWCompositing","useTransition","bindToWrapper","bindToTarget","disableMouse","disableTouch","autoBlur","autoEndDistance","outOfBoundaryDampingFactor","specifiedIndexAsContent","quadrant","merge","options","resolveBounce","process","translateZ","bounceOptions","DEFAULT_BOUNCE","NEGATED_BOUNCE","ActionsHandler","hooks","_a","wrapperEvents","targetEvents","shouldRegisterTouch","shouldRegisterMouse","bind","start","move","end","wrapperEventRegister","targetEventRegister","beforeHandler","preventDefaultConditions","setInitiated","initiated","_eventType","button","beforeStart","point","touches","pointX","pointY","deltaX","deltaY","scrollLeft","documentElement","pageXOffset","body","scrollTop","pageYOffset","pX","pY","clientWidth","clientHeight","setContent","content","rebindDOMEvents","translaterMetaData","y","Translater","getComputedPosition","cssStyle","getComputedStyle","matrix","translate","transformStyle","transformFnName","transformFnArgUnit","transformFnArg","beforeTranslate","join","Base","translater","timer","endPoint","setPending","pending","setForceStopped","forceStopped","setCallStop","called","callStopWhenPending","stop","clearTimer","isValidPostion","startPoint","currentPos","prePos","computeDirection","endValue","startValue","delta","direction","directionX","directionY","Transition","startProbe","probe","pos","transitionTime","time","easing","timeFunction","easingFn","isRealtimeProbeType","_reflow","doStop","forceStop","stopFromTransition","callStop","Animation","animate","duration","startTime","destTime","step","newPoint","stopFromAnimation","createAnimater","element","animaterOptions","Behavior","refresh","dist","setMovingDirection","setDirection","hasScroll","performDampingAlgorithm","movingDirection","dampingFactor","newPos","minScrollPos","maxScrollPos","bounces","momentumInfo","absDist","Math","abs","startPos","wrapperSize","destination","current","lowerMargin","upperMargin","distance","speed","momentumData","rate","round","updateDirection","absStartPos","size","position","isWrapperStatic","wrapperRect","contentRect","contentSize","relativeOffset","computeBoundary","resetState","resetStartPos","beforeComputeBoundary","boundary","scrollable","updatePosition","getCurrentPos","checkInBoundary","adjustPosition","inBoundary","ignoreHasScroll","updateStartPos","updateAbsStartPos","getAbsDist","_b","_c","_d","PassthroughHandlers","DirectionMap","DirectionLockAction","reset","directionLocked","checkMovingDirection","absDistX","absDistY","computeDirectionLock","handleEventPassthrough","adjustDelta","handleMap","applyQuadrantTransformation","ScrollerActions","scrollBehaviorX","scrollBehaviorY","actionsHandler","animater","directionLockAction","enabled","bindActionsHandler","handleStart","transformateDeltaX","transformateDeltaY","transformateDeltaData","coordinateTransformation","handleMove","handleEnd","handleClick","timestamp","fingerMoved","contentMoved","beforeMove","checkMomentum","prevX","newX","prevY","newY","detectMovingDirection","positionChanged","contentNotMoved","scrollStart","dispatchScroll","scroll","endTime","beforeEnd","ensureIntegerPos","scrollEnd","ensuringInteger","minScrollPosX","maxScrollPosX","minScrollPosY","maxScrollPosY","ceil","floor","createActionsHandlerOptions","bsOptions","reduce","prev","cur","createBehaviorOptions","extraProp","bubbling","sourceEvent","targetEvent","isSamePoint","keys_1","MIN_SCROLL_DISTANCE","Scroller","resizeTimeout","actions","resizeHandler","resize","resizeRegister","registerTransitionEnd","init","bindTranslater","bindAnimater","bindActions","togglePointerEvents","transitionEndRegister","prevPos","updatePositions","resetPosition","beforeScrollStart","touchEnd","scrollCancel","checkClick","checkFlick","flick","flickMinMovingDistance","meta","swiper","momentumX","momentumY","scrollTo","preventClick","_dblclick","dblclickTrigged","lastClickTime","delay","children","pointerEvents","node","isBScrollContainer","contentChanged","beforeRefresh","wrapperOffset","scrollBy","extraTransform","minDistanceScroll","scrollToElement","offsetX","offsetY","targetEle","getOffset","getPos","wrapperPos","scrollBehavior","xInBoundary","yInBoundary","reflow","enable","disable","BScrollConstructor","plugins","valid","use","ctor","pluginName","installed","plugin","pluginsMap","applyOrder","scroller","eventBubbling","handleAutoBlur","proxy","applyPlugins","refreshWithoutReset","beforeInitialScrollTo","sort","applyOrderMap","aOrder","bOrder","activeElement","blur","eventRegister","createBScroll","bs","BScroll","default"],"sources":["C:/Users/www16/Desktop/培训/codespace/vue 框架/vue-sell-new/node_modules/@better-scroll/core/dist/core.esm.js"],"sourcesContent":["/*!\n * better-scroll / core\n * (c) 2016-2023 ustbhuangyi\n * Released under the MIT License.\n */\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\nvar propertiesConfig = [\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.currentPos',\r\n        key: 'x'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.currentPos',\r\n        key: 'y'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.hasScroll',\r\n        key: 'hasHorizontalScroll'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.hasScroll',\r\n        key: 'hasVerticalScroll'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.contentSize',\r\n        key: 'scrollerWidth'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.contentSize',\r\n        key: 'scrollerHeight'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.maxScrollPos',\r\n        key: 'maxScrollX'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.maxScrollPos',\r\n        key: 'maxScrollY'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.minScrollPos',\r\n        key: 'minScrollX'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.minScrollPos',\r\n        key: 'minScrollY'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.movingDirection',\r\n        key: 'movingDirectionX'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.movingDirection',\r\n        key: 'movingDirectionY'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.direction',\r\n        key: 'directionX'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.direction',\r\n        key: 'directionY'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.actions.enabled',\r\n        key: 'enabled'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.animater.pending',\r\n        key: 'pending'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.animater.stop',\r\n        key: 'stop'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollTo',\r\n        key: 'scrollTo'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBy',\r\n        key: 'scrollBy'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollToElement',\r\n        key: 'scrollToElement'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.resetPosition',\r\n        key: 'resetPosition'\r\n    }\r\n];\n\nfunction warn(msg) {\r\n    console.error(\"[BScroll warn]: \" + msg);\r\n}\n\n// ssr support\r\nvar inBrowser = typeof window !== 'undefined';\r\nvar ua = inBrowser && navigator.userAgent.toLowerCase();\r\nvar isWeChatDevTools = !!(ua && /wechatdevtools/.test(ua));\r\nvar isAndroid = ua && ua.indexOf('android') > 0;\r\n/* istanbul ignore next */\r\nvar isIOSBadVersion = (function () {\r\n    if (typeof ua === 'string') {\r\n        var regex = /os (\\d\\d?_\\d(_\\d)?)/;\r\n        var matches = regex.exec(ua);\r\n        if (!matches)\r\n            return false;\r\n        var parts = matches[1].split('_').map(function (item) {\r\n            return parseInt(item, 10);\r\n        });\r\n        // ios version >= 13.4 issue 982\r\n        return !!(parts[0] === 13 && parts[1] >= 4);\r\n    }\r\n    return false;\r\n})();\r\n/* istanbul ignore next */\r\nvar supportsPassive = false;\r\n/* istanbul ignore next */\r\nif (inBrowser) {\r\n    var EventName = 'test-passive';\r\n    try {\r\n        var opts = {};\r\n        Object.defineProperty(opts, 'passive', {\r\n            get: function () {\r\n                supportsPassive = true;\r\n            },\r\n        }); // https://github.com/facebook/flow/issues/285\r\n        window.addEventListener(EventName, function () { }, opts);\r\n    }\r\n    catch (e) { }\r\n}\n\nfunction getNow() {\r\n    return window.performance &&\r\n        window.performance.now &&\r\n        window.performance.timing\r\n        ? window.performance.now() + window.performance.timing.navigationStart\r\n        : +new Date();\r\n}\r\nvar extend = function (target, source) {\r\n    for (var key in source) {\r\n        target[key] = source[key];\r\n    }\r\n    return target;\r\n};\r\nfunction isUndef(v) {\r\n    return v === undefined || v === null;\r\n}\r\nfunction between(x, min, max) {\r\n    if (x < min) {\r\n        return min;\r\n    }\r\n    if (x > max) {\r\n        return max;\r\n    }\r\n    return x;\r\n}\n\nvar elementStyle = (inBrowser &&\r\n    document.createElement('div').style);\r\nvar vendor = (function () {\r\n    /* istanbul ignore if  */\r\n    if (!inBrowser) {\r\n        return false;\r\n    }\r\n    var transformNames = [\r\n        {\r\n            key: 'standard',\r\n            value: 'transform',\r\n        },\r\n        {\r\n            key: 'webkit',\r\n            value: 'webkitTransform',\r\n        },\r\n        {\r\n            key: 'Moz',\r\n            value: 'MozTransform',\r\n        },\r\n        {\r\n            key: 'O',\r\n            value: 'OTransform',\r\n        },\r\n        {\r\n            key: 'ms',\r\n            value: 'msTransform',\r\n        },\r\n    ];\r\n    for (var _i = 0, transformNames_1 = transformNames; _i < transformNames_1.length; _i++) {\r\n        var obj = transformNames_1[_i];\r\n        if (elementStyle[obj.value] !== undefined) {\r\n            return obj.key;\r\n        }\r\n    }\r\n    /* istanbul ignore next  */\r\n    return false;\r\n})();\r\n/* istanbul ignore next  */\r\nfunction prefixStyle(style) {\r\n    if (vendor === false) {\r\n        return style;\r\n    }\r\n    if (vendor === 'standard') {\r\n        if (style === 'transitionEnd') {\r\n            return 'transitionend';\r\n        }\r\n        return style;\r\n    }\r\n    return vendor + style.charAt(0).toUpperCase() + style.substr(1);\r\n}\r\nfunction getElement(el) {\r\n    return (typeof el === 'string' ? document.querySelector(el) : el);\r\n}\r\nfunction addEvent(el, type, fn, capture) {\r\n    var useCapture = supportsPassive\r\n        ? {\r\n            passive: false,\r\n            capture: !!capture,\r\n        }\r\n        : !!capture;\r\n    el.addEventListener(type, fn, useCapture);\r\n}\r\nfunction removeEvent(el, type, fn, capture) {\r\n    el.removeEventListener(type, fn, {\r\n        capture: !!capture,\r\n    });\r\n}\r\nfunction maybePrevent(e) {\r\n    if (e.cancelable) {\r\n        e.preventDefault();\r\n    }\r\n}\r\nfunction offset(el) {\r\n    var left = 0;\r\n    var top = 0;\r\n    while (el) {\r\n        left -= el.offsetLeft;\r\n        top -= el.offsetTop;\r\n        el = el.offsetParent;\r\n    }\r\n    return {\r\n        left: left,\r\n        top: top,\r\n    };\r\n}\r\nvendor && vendor !== 'standard' ? '-' + vendor.toLowerCase() + '-' : '';\r\nvar transform = prefixStyle('transform');\r\nvar transition = prefixStyle('transition');\r\nvar hasPerspective = inBrowser && prefixStyle('perspective') in elementStyle;\r\n// fix issue #361\r\nvar hasTouch = inBrowser && ('ontouchstart' in window || isWeChatDevTools);\r\nvar hasTransition = inBrowser && transition in elementStyle;\r\nvar style = {\r\n    transform: transform,\r\n    transition: transition,\r\n    transitionTimingFunction: prefixStyle('transitionTimingFunction'),\r\n    transitionDuration: prefixStyle('transitionDuration'),\r\n    transitionDelay: prefixStyle('transitionDelay'),\r\n    transformOrigin: prefixStyle('transformOrigin'),\r\n    transitionEnd: prefixStyle('transitionEnd'),\r\n    transitionProperty: prefixStyle('transitionProperty'),\r\n};\r\nvar eventTypeMap = {\r\n    touchstart: 1,\r\n    touchmove: 1,\r\n    touchend: 1,\r\n    touchcancel: 1,\r\n    mousedown: 2,\r\n    mousemove: 2,\r\n    mouseup: 2,\r\n};\r\nfunction getRect(el) {\r\n    /* istanbul ignore if  */\r\n    if (el instanceof window.SVGElement) {\r\n        var rect = el.getBoundingClientRect();\r\n        return {\r\n            top: rect.top,\r\n            left: rect.left,\r\n            width: rect.width,\r\n            height: rect.height,\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            top: el.offsetTop,\r\n            left: el.offsetLeft,\r\n            width: el.offsetWidth,\r\n            height: el.offsetHeight,\r\n        };\r\n    }\r\n}\r\nfunction preventDefaultExceptionFn(el, exceptions) {\r\n    for (var i in exceptions) {\r\n        if (exceptions[i].test(el[i])) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nvar tagExceptionFn = preventDefaultExceptionFn;\r\nfunction tap(e, eventName) {\r\n    var ev = document.createEvent('Event');\r\n    ev.initEvent(eventName, true, true);\r\n    ev.pageX = e.pageX;\r\n    ev.pageY = e.pageY;\r\n    e.target.dispatchEvent(ev);\r\n}\r\nfunction click(e, event) {\r\n    if (event === void 0) { event = 'click'; }\r\n    var eventSource;\r\n    if (e.type === 'mouseup') {\r\n        eventSource = e;\r\n    }\r\n    else if (e.type === 'touchend' || e.type === 'touchcancel') {\r\n        eventSource = e.changedTouches[0];\r\n    }\r\n    var posSrc = {};\r\n    if (eventSource) {\r\n        posSrc.screenX = eventSource.screenX || 0;\r\n        posSrc.screenY = eventSource.screenY || 0;\r\n        posSrc.clientX = eventSource.clientX || 0;\r\n        posSrc.clientY = eventSource.clientY || 0;\r\n    }\r\n    var ev;\r\n    var bubbles = true;\r\n    var cancelable = true;\r\n    var ctrlKey = e.ctrlKey, shiftKey = e.shiftKey, altKey = e.altKey, metaKey = e.metaKey;\r\n    var pressedKeysMap = {\r\n        ctrlKey: ctrlKey,\r\n        shiftKey: shiftKey,\r\n        altKey: altKey,\r\n        metaKey: metaKey,\r\n    };\r\n    if (typeof MouseEvent !== 'undefined') {\r\n        try {\r\n            ev = new MouseEvent(event, extend(__assign({ bubbles: bubbles,\r\n                cancelable: cancelable }, pressedKeysMap), posSrc));\r\n        }\r\n        catch (e) {\r\n            /* istanbul ignore next */\r\n            createEvent();\r\n        }\r\n    }\r\n    else {\r\n        createEvent();\r\n    }\r\n    function createEvent() {\r\n        ev = document.createEvent('Event');\r\n        ev.initEvent(event, bubbles, cancelable);\r\n        extend(ev, posSrc);\r\n    }\r\n    // forwardedTouchEvent set to true in case of the conflict with fastclick\r\n    ev.forwardedTouchEvent = true;\r\n    ev._constructed = true;\r\n    e.target.dispatchEvent(ev);\r\n}\r\nfunction dblclick(e) {\r\n    click(e, 'dblclick');\r\n}\n\nvar ease = {\r\n    // easeOutQuint\r\n    swipe: {\r\n        style: 'cubic-bezier(0.23, 1, 0.32, 1)',\r\n        fn: function (t) {\r\n            return 1 + --t * t * t * t * t;\r\n        }\r\n    },\r\n    // easeOutQuard\r\n    swipeBounce: {\r\n        style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n        fn: function (t) {\r\n            return t * (2 - t);\r\n        }\r\n    },\r\n    // easeOutQuart\r\n    bounce: {\r\n        style: 'cubic-bezier(0.165, 0.84, 0.44, 1)',\r\n        fn: function (t) {\r\n            return 1 - --t * t * t * t;\r\n        }\r\n    }\r\n};\n\nvar DEFAULT_INTERVAL = 1000 / 60;\r\nvar windowCompat = inBrowser && window;\r\n/* istanbul ignore next */\r\nfunction noop$1() { }\r\nvar requestAnimationFrame = (function () {\r\n    /* istanbul ignore if  */\r\n    if (!inBrowser) {\r\n        return noop$1;\r\n    }\r\n    return (windowCompat.requestAnimationFrame ||\r\n        windowCompat.webkitRequestAnimationFrame ||\r\n        windowCompat.mozRequestAnimationFrame ||\r\n        windowCompat.oRequestAnimationFrame ||\r\n        // if all else fails, use setTimeout\r\n        function (callback) {\r\n            return window.setTimeout(callback, callback.interval || DEFAULT_INTERVAL); // make interval as precise as possible.\r\n        });\r\n})();\r\nvar cancelAnimationFrame = (function () {\r\n    /* istanbul ignore if  */\r\n    if (!inBrowser) {\r\n        return noop$1;\r\n    }\r\n    return (windowCompat.cancelAnimationFrame ||\r\n        windowCompat.webkitCancelAnimationFrame ||\r\n        windowCompat.mozCancelAnimationFrame ||\r\n        windowCompat.oCancelAnimationFrame ||\r\n        function (id) {\r\n            window.clearTimeout(id);\r\n        });\r\n})();\n\n/* istanbul ignore next */\r\nvar noop = function (val) { };\r\nvar sharedPropertyDefinition = {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get: noop,\r\n    set: noop,\r\n};\r\nvar getProperty = function (obj, key) {\r\n    var keys = key.split('.');\r\n    for (var i = 0; i < keys.length - 1; i++) {\r\n        obj = obj[keys[i]];\r\n        if (typeof obj !== 'object' || !obj)\r\n            return;\r\n    }\r\n    var lastKey = keys.pop();\r\n    if (typeof obj[lastKey] === 'function') {\r\n        return function () {\r\n            return obj[lastKey].apply(obj, arguments);\r\n        };\r\n    }\r\n    else {\r\n        return obj[lastKey];\r\n    }\r\n};\r\nvar setProperty = function (obj, key, value) {\r\n    var keys = key.split('.');\r\n    var temp;\r\n    for (var i = 0; i < keys.length - 1; i++) {\r\n        temp = keys[i];\r\n        if (!obj[temp])\r\n            obj[temp] = {};\r\n        obj = obj[temp];\r\n    }\r\n    obj[keys.pop()] = value;\r\n};\r\nfunction propertiesProxy(target, sourceKey, key) {\r\n    sharedPropertyDefinition.get = function proxyGetter() {\r\n        return getProperty(this, sourceKey);\r\n    };\r\n    sharedPropertyDefinition.set = function proxySetter(val) {\r\n        setProperty(this, sourceKey, val);\r\n    };\r\n    Object.defineProperty(target, key, sharedPropertyDefinition);\r\n}\n\nvar EventEmitter = /** @class */ (function () {\r\n    function EventEmitter(names) {\r\n        this.events = {};\r\n        this.eventTypes = {};\r\n        this.registerType(names);\r\n    }\r\n    EventEmitter.prototype.on = function (type, fn, context) {\r\n        if (context === void 0) { context = this; }\r\n        this.hasType(type);\r\n        if (!this.events[type]) {\r\n            this.events[type] = [];\r\n        }\r\n        this.events[type].push([fn, context]);\r\n        return this;\r\n    };\r\n    EventEmitter.prototype.once = function (type, fn, context) {\r\n        var _this = this;\r\n        if (context === void 0) { context = this; }\r\n        this.hasType(type);\r\n        var magic = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            _this.off(type, magic);\r\n            var ret = fn.apply(context, args);\r\n            if (ret === true) {\r\n                return ret;\r\n            }\r\n        };\r\n        magic.fn = fn;\r\n        this.on(type, magic);\r\n        return this;\r\n    };\r\n    EventEmitter.prototype.off = function (type, fn) {\r\n        if (!type && !fn) {\r\n            this.events = {};\r\n            return this;\r\n        }\r\n        if (type) {\r\n            this.hasType(type);\r\n            if (!fn) {\r\n                this.events[type] = [];\r\n                return this;\r\n            }\r\n            var events = this.events[type];\r\n            if (!events) {\r\n                return this;\r\n            }\r\n            var count = events.length;\r\n            while (count--) {\r\n                if (events[count][0] === fn ||\r\n                    (events[count][0] && events[count][0].fn === fn)) {\r\n                    events.splice(count, 1);\r\n                }\r\n            }\r\n            return this;\r\n        }\r\n    };\r\n    EventEmitter.prototype.trigger = function (type) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        this.hasType(type);\r\n        var events = this.events[type];\r\n        if (!events) {\r\n            return;\r\n        }\r\n        var len = events.length;\r\n        var eventsCopy = __spreadArrays(events);\r\n        var ret;\r\n        for (var i = 0; i < len; i++) {\r\n            var event_1 = eventsCopy[i];\r\n            var fn = event_1[0], context = event_1[1];\r\n            if (fn) {\r\n                ret = fn.apply(context, args);\r\n                if (ret === true) {\r\n                    return ret;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    EventEmitter.prototype.registerType = function (names) {\r\n        var _this = this;\r\n        names.forEach(function (type) {\r\n            _this.eventTypes[type] = type;\r\n        });\r\n    };\r\n    EventEmitter.prototype.destroy = function () {\r\n        this.events = {};\r\n        this.eventTypes = {};\r\n    };\r\n    EventEmitter.prototype.hasType = function (type) {\r\n        var types = this.eventTypes;\r\n        var isType = types[type] === type;\r\n        if (!isType) {\r\n            warn(\"EventEmitter has used unknown event type: \\\"\" + type + \"\\\", should be oneof [\" +\r\n                (\"\" + Object.keys(types).map(function (_) { return JSON.stringify(_); })) +\r\n                \"]\");\r\n        }\r\n    };\r\n    return EventEmitter;\r\n}());\r\nvar EventRegister = /** @class */ (function () {\r\n    function EventRegister(wrapper, events) {\r\n        this.wrapper = wrapper;\r\n        this.events = events;\r\n        this.addDOMEvents();\r\n    }\r\n    EventRegister.prototype.destroy = function () {\r\n        this.removeDOMEvents();\r\n        this.events = [];\r\n    };\r\n    EventRegister.prototype.addDOMEvents = function () {\r\n        this.handleDOMEvents(addEvent);\r\n    };\r\n    EventRegister.prototype.removeDOMEvents = function () {\r\n        this.handleDOMEvents(removeEvent);\r\n    };\r\n    EventRegister.prototype.handleDOMEvents = function (eventOperation) {\r\n        var _this = this;\r\n        var wrapper = this.wrapper;\r\n        this.events.forEach(function (event) {\r\n            eventOperation(wrapper, event.name, _this, !!event.capture);\r\n        });\r\n    };\r\n    EventRegister.prototype.handleEvent = function (e) {\r\n        var eventType = e.type;\r\n        this.events.some(function (event) {\r\n            if (event.name === eventType) {\r\n                event.handler(e);\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    };\r\n    return EventRegister;\r\n}());\n\nvar CustomOptions = /** @class */ (function () {\r\n    function CustomOptions() {\r\n    }\r\n    return CustomOptions;\r\n}());\r\nvar OptionsConstructor = /** @class */ (function (_super) {\r\n    __extends(OptionsConstructor, _super);\r\n    function OptionsConstructor() {\r\n        var _this = _super.call(this) || this;\r\n        _this.startX = 0;\r\n        _this.startY = 0;\r\n        _this.scrollX = false;\r\n        _this.scrollY = true;\r\n        _this.freeScroll = false;\r\n        _this.directionLockThreshold = 0;\r\n        _this.eventPassthrough = \"\" /* None */;\r\n        _this.click = false;\r\n        _this.dblclick = false;\r\n        _this.tap = '';\r\n        _this.bounce = {\r\n            top: true,\r\n            bottom: true,\r\n            left: true,\r\n            right: true,\r\n        };\r\n        _this.bounceTime = 800;\r\n        _this.momentum = true;\r\n        _this.momentumLimitTime = 300;\r\n        _this.momentumLimitDistance = 15;\r\n        _this.swipeTime = 2500;\r\n        _this.swipeBounceTime = 500;\r\n        _this.deceleration = 0.0015;\r\n        _this.flickLimitTime = 200;\r\n        _this.flickLimitDistance = 100;\r\n        _this.resizePolling = 60;\r\n        _this.probeType = 0 /* Default */;\r\n        _this.stopPropagation = false;\r\n        _this.preventDefault = true;\r\n        _this.preventDefaultException = {\r\n            tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/,\r\n        };\r\n        _this.tagException = {\r\n            tagName: /^TEXTAREA$/,\r\n        };\r\n        _this.HWCompositing = true;\r\n        _this.useTransition = true;\r\n        _this.bindToWrapper = false;\r\n        _this.bindToTarget = false;\r\n        _this.disableMouse = hasTouch;\r\n        _this.disableTouch = !hasTouch;\r\n        _this.autoBlur = true;\r\n        _this.autoEndDistance = 5;\r\n        _this.outOfBoundaryDampingFactor = 1 / 3;\r\n        _this.specifiedIndexAsContent = 0;\r\n        _this.quadrant = 1 /* First */;\r\n        return _this;\r\n    }\r\n    OptionsConstructor.prototype.merge = function (options) {\r\n        if (!options)\r\n            return this;\r\n        for (var key in options) {\r\n            if (key === 'bounce') {\r\n                this.bounce = this.resolveBounce(options[key]);\r\n                continue;\r\n            }\r\n            this[key] = options[key];\r\n        }\r\n        return this;\r\n    };\r\n    OptionsConstructor.prototype.process = function () {\r\n        this.translateZ =\r\n            this.HWCompositing && hasPerspective ? ' translateZ(1px)' : '';\r\n        this.useTransition = this.useTransition && hasTransition;\r\n        this.preventDefault = !this.eventPassthrough && this.preventDefault;\r\n        // If you want eventPassthrough I have to lock one of the axes\r\n        this.scrollX =\r\n            this.eventPassthrough === \"horizontal\" /* Horizontal */\r\n                ? false\r\n                : this.scrollX;\r\n        this.scrollY =\r\n            this.eventPassthrough === \"vertical\" /* Vertical */ ? false : this.scrollY;\r\n        // With eventPassthrough we also need lockDirection mechanism\r\n        this.freeScroll = this.freeScroll && !this.eventPassthrough;\r\n        // force true when freeScroll is true\r\n        this.scrollX = this.freeScroll ? true : this.scrollX;\r\n        this.scrollY = this.freeScroll ? true : this.scrollY;\r\n        this.directionLockThreshold = this.eventPassthrough\r\n            ? 0\r\n            : this.directionLockThreshold;\r\n        return this;\r\n    };\r\n    OptionsConstructor.prototype.resolveBounce = function (bounceOptions) {\r\n        var DEFAULT_BOUNCE = {\r\n            top: true,\r\n            right: true,\r\n            bottom: true,\r\n            left: true,\r\n        };\r\n        var NEGATED_BOUNCE = {\r\n            top: false,\r\n            right: false,\r\n            bottom: false,\r\n            left: false,\r\n        };\r\n        var ret;\r\n        if (typeof bounceOptions === 'object') {\r\n            ret = extend(DEFAULT_BOUNCE, bounceOptions);\r\n        }\r\n        else {\r\n            ret = bounceOptions ? DEFAULT_BOUNCE : NEGATED_BOUNCE;\r\n        }\r\n        return ret;\r\n    };\r\n    return OptionsConstructor;\r\n}(CustomOptions));\n\nvar ActionsHandler = /** @class */ (function () {\r\n    function ActionsHandler(wrapper, options) {\r\n        this.wrapper = wrapper;\r\n        this.options = options;\r\n        this.hooks = new EventEmitter([\r\n            'beforeStart',\r\n            'start',\r\n            'move',\r\n            'end',\r\n            'click',\r\n        ]);\r\n        this.handleDOMEvents();\r\n    }\r\n    ActionsHandler.prototype.handleDOMEvents = function () {\r\n        var _a = this.options, bindToWrapper = _a.bindToWrapper, disableMouse = _a.disableMouse, disableTouch = _a.disableTouch, click = _a.click;\r\n        var wrapper = this.wrapper;\r\n        var target = bindToWrapper ? wrapper : window;\r\n        var wrapperEvents = [];\r\n        var targetEvents = [];\r\n        var shouldRegisterTouch = !disableTouch;\r\n        var shouldRegisterMouse = !disableMouse;\r\n        if (click) {\r\n            wrapperEvents.push({\r\n                name: 'click',\r\n                handler: this.click.bind(this),\r\n                capture: true,\r\n            });\r\n        }\r\n        if (shouldRegisterTouch) {\r\n            wrapperEvents.push({\r\n                name: 'touchstart',\r\n                handler: this.start.bind(this),\r\n            });\r\n            targetEvents.push({\r\n                name: 'touchmove',\r\n                handler: this.move.bind(this),\r\n            }, {\r\n                name: 'touchend',\r\n                handler: this.end.bind(this),\r\n            }, {\r\n                name: 'touchcancel',\r\n                handler: this.end.bind(this),\r\n            });\r\n        }\r\n        if (shouldRegisterMouse) {\r\n            wrapperEvents.push({\r\n                name: 'mousedown',\r\n                handler: this.start.bind(this),\r\n            });\r\n            targetEvents.push({\r\n                name: 'mousemove',\r\n                handler: this.move.bind(this),\r\n            }, {\r\n                name: 'mouseup',\r\n                handler: this.end.bind(this),\r\n            });\r\n        }\r\n        this.wrapperEventRegister = new EventRegister(wrapper, wrapperEvents);\r\n        this.targetEventRegister = new EventRegister(target, targetEvents);\r\n    };\r\n    ActionsHandler.prototype.beforeHandler = function (e, type) {\r\n        var _a = this.options, preventDefault = _a.preventDefault, stopPropagation = _a.stopPropagation, preventDefaultException = _a.preventDefaultException;\r\n        var preventDefaultConditions = {\r\n            start: function () {\r\n                return (preventDefault &&\r\n                    !preventDefaultExceptionFn(e.target, preventDefaultException));\r\n            },\r\n            end: function () {\r\n                return (preventDefault &&\r\n                    !preventDefaultExceptionFn(e.target, preventDefaultException));\r\n            },\r\n            move: function () {\r\n                return preventDefault;\r\n            },\r\n        };\r\n        if (preventDefaultConditions[type]()) {\r\n            e.preventDefault();\r\n        }\r\n        if (stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n    ActionsHandler.prototype.setInitiated = function (type) {\r\n        if (type === void 0) { type = 0; }\r\n        this.initiated = type;\r\n    };\r\n    ActionsHandler.prototype.start = function (e) {\r\n        var _eventType = eventTypeMap[e.type];\r\n        if (this.initiated && this.initiated !== _eventType) {\r\n            return;\r\n        }\r\n        this.setInitiated(_eventType);\r\n        // if textarea or other html tags in options.tagException is manipulated\r\n        // do not make bs scroll\r\n        if (tagExceptionFn(e.target, this.options.tagException)) {\r\n            this.setInitiated();\r\n            return;\r\n        }\r\n        // only allow mouse left button\r\n        if (_eventType === 2 /* Mouse */ && e.button !== 0 /* Left */)\r\n            return;\r\n        if (this.hooks.trigger(this.hooks.eventTypes.beforeStart, e)) {\r\n            return;\r\n        }\r\n        this.beforeHandler(e, 'start');\r\n        var point = (e.touches ? e.touches[0] : e);\r\n        this.pointX = point.pageX;\r\n        this.pointY = point.pageY;\r\n        this.hooks.trigger(this.hooks.eventTypes.start, e);\r\n    };\r\n    ActionsHandler.prototype.move = function (e) {\r\n        if (eventTypeMap[e.type] !== this.initiated) {\r\n            return;\r\n        }\r\n        this.beforeHandler(e, 'move');\r\n        var point = (e.touches ? e.touches[0] : e);\r\n        var deltaX = point.pageX - this.pointX;\r\n        var deltaY = point.pageY - this.pointY;\r\n        this.pointX = point.pageX;\r\n        this.pointY = point.pageY;\r\n        if (this.hooks.trigger(this.hooks.eventTypes.move, {\r\n            deltaX: deltaX,\r\n            deltaY: deltaY,\r\n            e: e,\r\n        })) {\r\n            return;\r\n        }\r\n        // auto end when out of viewport\r\n        var scrollLeft = document.documentElement.scrollLeft ||\r\n            window.pageXOffset ||\r\n            document.body.scrollLeft;\r\n        var scrollTop = document.documentElement.scrollTop ||\r\n            window.pageYOffset ||\r\n            document.body.scrollTop;\r\n        var pX = this.pointX - scrollLeft;\r\n        var pY = this.pointY - scrollTop;\r\n        var autoEndDistance = this.options.autoEndDistance;\r\n        if (pX > document.documentElement.clientWidth - autoEndDistance ||\r\n            pY > document.documentElement.clientHeight - autoEndDistance ||\r\n            pX < autoEndDistance ||\r\n            pY < autoEndDistance) {\r\n            this.end(e);\r\n        }\r\n    };\r\n    ActionsHandler.prototype.end = function (e) {\r\n        if (eventTypeMap[e.type] !== this.initiated) {\r\n            return;\r\n        }\r\n        this.setInitiated();\r\n        this.beforeHandler(e, 'end');\r\n        this.hooks.trigger(this.hooks.eventTypes.end, e);\r\n    };\r\n    ActionsHandler.prototype.click = function (e) {\r\n        this.hooks.trigger(this.hooks.eventTypes.click, e);\r\n    };\r\n    ActionsHandler.prototype.setContent = function (content) {\r\n        if (content !== this.wrapper) {\r\n            this.wrapper = content;\r\n            this.rebindDOMEvents();\r\n        }\r\n    };\r\n    ActionsHandler.prototype.rebindDOMEvents = function () {\r\n        this.wrapperEventRegister.destroy();\r\n        this.targetEventRegister.destroy();\r\n        this.handleDOMEvents();\r\n    };\r\n    ActionsHandler.prototype.destroy = function () {\r\n        this.wrapperEventRegister.destroy();\r\n        this.targetEventRegister.destroy();\r\n        this.hooks.destroy();\r\n    };\r\n    return ActionsHandler;\r\n}());\n\nvar translaterMetaData = {\r\n    x: ['translateX', 'px'],\r\n    y: ['translateY', 'px'],\r\n};\r\nvar Translater = /** @class */ (function () {\r\n    function Translater(content) {\r\n        this.setContent(content);\r\n        this.hooks = new EventEmitter(['beforeTranslate', 'translate']);\r\n    }\r\n    Translater.prototype.getComputedPosition = function () {\r\n        var cssStyle = window.getComputedStyle(this.content, null);\r\n        var matrix = cssStyle[style.transform].split(')')[0].split(', ');\r\n        var x = +(matrix[12] || matrix[4]) || 0;\r\n        var y = +(matrix[13] || matrix[5]) || 0;\r\n        return {\r\n            x: x,\r\n            y: y,\r\n        };\r\n    };\r\n    Translater.prototype.translate = function (point) {\r\n        var transformStyle = [];\r\n        Object.keys(point).forEach(function (key) {\r\n            if (!translaterMetaData[key]) {\r\n                return;\r\n            }\r\n            var transformFnName = translaterMetaData[key][0];\r\n            if (transformFnName) {\r\n                var transformFnArgUnit = translaterMetaData[key][1];\r\n                var transformFnArg = point[key];\r\n                transformStyle.push(transformFnName + \"(\" + transformFnArg + transformFnArgUnit + \")\");\r\n            }\r\n        });\r\n        this.hooks.trigger(this.hooks.eventTypes.beforeTranslate, transformStyle, point);\r\n        this.style[style.transform] = transformStyle.join(' ');\r\n        this.hooks.trigger(this.hooks.eventTypes.translate, point);\r\n    };\r\n    Translater.prototype.setContent = function (content) {\r\n        if (this.content !== content) {\r\n            this.content = content;\r\n            this.style = content.style;\r\n        }\r\n    };\r\n    Translater.prototype.destroy = function () {\r\n        this.hooks.destroy();\r\n    };\r\n    return Translater;\r\n}());\n\nvar Base = /** @class */ (function () {\r\n    function Base(content, translater, options) {\r\n        this.translater = translater;\r\n        this.options = options;\r\n        this.timer = 0;\r\n        this.hooks = new EventEmitter([\r\n            'move',\r\n            'end',\r\n            'beforeForceStop',\r\n            'forceStop',\r\n            'callStop',\r\n            'time',\r\n            'timeFunction',\r\n        ]);\r\n        this.setContent(content);\r\n    }\r\n    Base.prototype.translate = function (endPoint) {\r\n        this.translater.translate(endPoint);\r\n    };\r\n    Base.prototype.setPending = function (pending) {\r\n        this.pending = pending;\r\n    };\r\n    Base.prototype.setForceStopped = function (forceStopped) {\r\n        this.forceStopped = forceStopped;\r\n    };\r\n    Base.prototype.setCallStop = function (called) {\r\n        this.callStopWhenPending = called;\r\n    };\r\n    Base.prototype.setContent = function (content) {\r\n        if (this.content !== content) {\r\n            this.content = content;\r\n            this.style = content.style;\r\n            this.stop();\r\n        }\r\n    };\r\n    Base.prototype.clearTimer = function () {\r\n        if (this.timer) {\r\n            cancelAnimationFrame(this.timer);\r\n            this.timer = 0;\r\n        }\r\n    };\r\n    Base.prototype.destroy = function () {\r\n        this.hooks.destroy();\r\n        cancelAnimationFrame(this.timer);\r\n    };\r\n    return Base;\r\n}());\n\n// iOS 13.6 - 14.x, window.getComputedStyle sometimes will get wrong transform value\r\n// when bs use transition mode\r\n// eg: translateY -100px -> -200px, when the last frame which is about to scroll to -200px\r\n// window.getComputedStyle(this.content) will calculate transformY to be -100px(startPoint)\r\n// it is weird\r\n// so we should validate position caculated by 'window.getComputedStyle'\r\nvar isValidPostion = function (startPoint, endPoint, currentPos, prePos) {\r\n    var computeDirection = function (endValue, startValue) {\r\n        var delta = endValue - startValue;\r\n        var direction = delta > 0\r\n            ? -1 /* Negative */\r\n            : delta < 0\r\n                ? 1 /* Positive */\r\n                : 0 /* Default */;\r\n        return direction;\r\n    };\r\n    var directionX = computeDirection(endPoint.x, startPoint.x);\r\n    var directionY = computeDirection(endPoint.y, startPoint.y);\r\n    var deltaX = currentPos.x - prePos.x;\r\n    var deltaY = currentPos.y - prePos.y;\r\n    return directionX * deltaX <= 0 && directionY * deltaY <= 0;\r\n};\n\nvar Transition = /** @class */ (function (_super) {\r\n    __extends(Transition, _super);\r\n    function Transition() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Transition.prototype.startProbe = function (startPoint, endPoint) {\r\n        var _this = this;\r\n        var prePos = startPoint;\r\n        var probe = function () {\r\n            var pos = _this.translater.getComputedPosition();\r\n            if (isValidPostion(startPoint, endPoint, pos, prePos)) {\r\n                _this.hooks.trigger(_this.hooks.eventTypes.move, pos);\r\n            }\r\n            // call bs.stop() should not dispatch end hook again.\r\n            // forceStop hook will do this.\r\n            /* istanbul ignore if  */\r\n            if (!_this.pending) {\r\n                if (_this.callStopWhenPending) {\r\n                    _this.callStopWhenPending = false;\r\n                }\r\n                else {\r\n                    // transition ends should dispatch end hook.\r\n                    _this.hooks.trigger(_this.hooks.eventTypes.end, pos);\r\n                }\r\n            }\r\n            prePos = pos;\r\n            if (_this.pending) {\r\n                _this.timer = requestAnimationFrame(probe);\r\n            }\r\n        };\r\n        // when manually call bs.stop(), then bs.scrollTo()\r\n        // we should reset callStopWhenPending to dispatch end hook\r\n        if (this.callStopWhenPending) {\r\n            this.setCallStop(false);\r\n        }\r\n        cancelAnimationFrame(this.timer);\r\n        probe();\r\n    };\r\n    Transition.prototype.transitionTime = function (time) {\r\n        if (time === void 0) { time = 0; }\r\n        this.style[style.transitionDuration] = time + 'ms';\r\n        this.hooks.trigger(this.hooks.eventTypes.time, time);\r\n    };\r\n    Transition.prototype.transitionTimingFunction = function (easing) {\r\n        this.style[style.transitionTimingFunction] = easing;\r\n        this.hooks.trigger(this.hooks.eventTypes.timeFunction, easing);\r\n    };\r\n    Transition.prototype.transitionProperty = function () {\r\n        this.style[style.transitionProperty] = style.transform;\r\n    };\r\n    Transition.prototype.move = function (startPoint, endPoint, time, easingFn) {\r\n        this.setPending(time > 0);\r\n        this.transitionTimingFunction(easingFn);\r\n        this.transitionProperty();\r\n        this.transitionTime(time);\r\n        this.translate(endPoint);\r\n        var isRealtimeProbeType = this.options.probeType === 3 /* Realtime */;\r\n        if (time && isRealtimeProbeType) {\r\n            this.startProbe(startPoint, endPoint);\r\n        }\r\n        // if we change content's transformY in a tick\r\n        // such as: 0 -> 50px -> 0\r\n        // transitionend will not be triggered\r\n        // so we forceupdate by reflow\r\n        if (!time) {\r\n            this._reflow = this.content.offsetHeight;\r\n            if (isRealtimeProbeType) {\r\n                this.hooks.trigger(this.hooks.eventTypes.move, endPoint);\r\n            }\r\n            this.hooks.trigger(this.hooks.eventTypes.end, endPoint);\r\n        }\r\n    };\r\n    Transition.prototype.doStop = function () {\r\n        var pending = this.pending;\r\n        this.setForceStopped(false);\r\n        this.setCallStop(false);\r\n        // still in transition\r\n        if (pending) {\r\n            this.setPending(false);\r\n            cancelAnimationFrame(this.timer);\r\n            var _a = this.translater.getComputedPosition(), x = _a.x, y = _a.y;\r\n            this.transitionTime();\r\n            this.translate({ x: x, y: y });\r\n            this.setForceStopped(true);\r\n            this.setCallStop(true);\r\n            this.hooks.trigger(this.hooks.eventTypes.forceStop, { x: x, y: y });\r\n        }\r\n        return pending;\r\n    };\r\n    Transition.prototype.stop = function () {\r\n        var stopFromTransition = this.doStop();\r\n        if (stopFromTransition) {\r\n            this.hooks.trigger(this.hooks.eventTypes.callStop);\r\n        }\r\n    };\r\n    return Transition;\r\n}(Base));\n\nvar Animation = /** @class */ (function (_super) {\r\n    __extends(Animation, _super);\r\n    function Animation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Animation.prototype.move = function (startPoint, endPoint, time, easingFn) {\r\n        // time is 0\r\n        if (!time) {\r\n            this.translate(endPoint);\r\n            if (this.options.probeType === 3 /* Realtime */) {\r\n                this.hooks.trigger(this.hooks.eventTypes.move, endPoint);\r\n            }\r\n            this.hooks.trigger(this.hooks.eventTypes.end, endPoint);\r\n            return;\r\n        }\r\n        this.animate(startPoint, endPoint, time, easingFn);\r\n    };\r\n    Animation.prototype.animate = function (startPoint, endPoint, duration, easingFn) {\r\n        var _this = this;\r\n        var startTime = getNow();\r\n        var destTime = startTime + duration;\r\n        var isRealtimeProbeType = this.options.probeType === 3 /* Realtime */;\r\n        var step = function () {\r\n            var now = getNow();\r\n            // js animation end\r\n            if (now >= destTime) {\r\n                _this.translate(endPoint);\r\n                if (isRealtimeProbeType) {\r\n                    _this.hooks.trigger(_this.hooks.eventTypes.move, endPoint);\r\n                }\r\n                _this.hooks.trigger(_this.hooks.eventTypes.end, endPoint);\r\n                return;\r\n            }\r\n            now = (now - startTime) / duration;\r\n            var easing = easingFn(now);\r\n            var newPoint = {};\r\n            Object.keys(endPoint).forEach(function (key) {\r\n                var startValue = startPoint[key];\r\n                var endValue = endPoint[key];\r\n                newPoint[key] = (endValue - startValue) * easing + startValue;\r\n            });\r\n            _this.translate(newPoint);\r\n            if (isRealtimeProbeType) {\r\n                _this.hooks.trigger(_this.hooks.eventTypes.move, newPoint);\r\n            }\r\n            if (_this.pending) {\r\n                _this.timer = requestAnimationFrame(step);\r\n            }\r\n            // call bs.stop() should not dispatch end hook again.\r\n            // forceStop hook will do this.\r\n            /* istanbul ignore if  */\r\n            if (!_this.pending) {\r\n                if (_this.callStopWhenPending) {\r\n                    _this.callStopWhenPending = false;\r\n                }\r\n                else {\r\n                    // raf ends should dispatch end hook.\r\n                    _this.hooks.trigger(_this.hooks.eventTypes.end, endPoint);\r\n                }\r\n            }\r\n        };\r\n        this.setPending(true);\r\n        // when manually call bs.stop(), then bs.scrollTo()\r\n        // we should reset callStopWhenPending to dispatch end hook\r\n        if (this.callStopWhenPending) {\r\n            this.setCallStop(false);\r\n        }\r\n        cancelAnimationFrame(this.timer);\r\n        step();\r\n    };\r\n    Animation.prototype.doStop = function () {\r\n        var pending = this.pending;\r\n        this.setForceStopped(false);\r\n        this.setCallStop(false);\r\n        // still in requestFrameAnimation\r\n        if (pending) {\r\n            this.setPending(false);\r\n            cancelAnimationFrame(this.timer);\r\n            var pos = this.translater.getComputedPosition();\r\n            this.setForceStopped(true);\r\n            this.setCallStop(true);\r\n            this.hooks.trigger(this.hooks.eventTypes.forceStop, pos);\r\n        }\r\n        return pending;\r\n    };\r\n    Animation.prototype.stop = function () {\r\n        var stopFromAnimation = this.doStop();\r\n        if (stopFromAnimation) {\r\n            this.hooks.trigger(this.hooks.eventTypes.callStop);\r\n        }\r\n    };\r\n    return Animation;\r\n}(Base));\n\nfunction createAnimater(element, translater, options) {\r\n    var useTransition = options.useTransition;\r\n    var animaterOptions = {};\r\n    Object.defineProperty(animaterOptions, 'probeType', {\r\n        enumerable: true,\r\n        configurable: false,\r\n        get: function () {\r\n            return options.probeType;\r\n        },\r\n    });\r\n    if (useTransition) {\r\n        return new Transition(element, translater, animaterOptions);\r\n    }\r\n    else {\r\n        return new Animation(element, translater, animaterOptions);\r\n    }\r\n}\n\nvar Behavior = /** @class */ (function () {\r\n    function Behavior(wrapper, content, options) {\r\n        this.wrapper = wrapper;\r\n        this.options = options;\r\n        this.hooks = new EventEmitter([\r\n            'beforeComputeBoundary',\r\n            'computeBoundary',\r\n            'momentum',\r\n            'end',\r\n            'ignoreHasScroll'\r\n        ]);\r\n        this.refresh(content);\r\n    }\r\n    Behavior.prototype.start = function () {\r\n        this.dist = 0;\r\n        this.setMovingDirection(0 /* Default */);\r\n        this.setDirection(0 /* Default */);\r\n    };\r\n    Behavior.prototype.move = function (delta) {\r\n        delta = this.hasScroll ? delta : 0;\r\n        this.setMovingDirection(delta);\r\n        return this.performDampingAlgorithm(delta, this.options.outOfBoundaryDampingFactor);\r\n    };\r\n    Behavior.prototype.setMovingDirection = function (delta) {\r\n        this.movingDirection =\r\n            delta > 0\r\n                ? -1 /* Negative */\r\n                : delta < 0\r\n                    ? 1 /* Positive */\r\n                    : 0 /* Default */;\r\n    };\r\n    Behavior.prototype.setDirection = function (delta) {\r\n        this.direction =\r\n            delta > 0\r\n                ? -1 /* Negative */\r\n                : delta < 0\r\n                    ? 1 /* Positive */\r\n                    : 0 /* Default */;\r\n    };\r\n    Behavior.prototype.performDampingAlgorithm = function (delta, dampingFactor) {\r\n        var newPos = this.currentPos + delta;\r\n        // Slow down or stop if outside of the boundaries\r\n        if (newPos > this.minScrollPos || newPos < this.maxScrollPos) {\r\n            if ((newPos > this.minScrollPos && this.options.bounces[0]) ||\r\n                (newPos < this.maxScrollPos && this.options.bounces[1])) {\r\n                newPos = this.currentPos + delta * dampingFactor;\r\n            }\r\n            else {\r\n                newPos =\r\n                    newPos > this.minScrollPos ? this.minScrollPos : this.maxScrollPos;\r\n            }\r\n        }\r\n        return newPos;\r\n    };\r\n    Behavior.prototype.end = function (duration) {\r\n        var momentumInfo = {\r\n            duration: 0\r\n        };\r\n        var absDist = Math.abs(this.currentPos - this.startPos);\r\n        // start momentum animation if needed\r\n        if (this.options.momentum &&\r\n            duration < this.options.momentumLimitTime &&\r\n            absDist > this.options.momentumLimitDistance) {\r\n            var wrapperSize = (this.direction === -1 /* Negative */ && this.options.bounces[0]) ||\r\n                (this.direction === 1 /* Positive */ && this.options.bounces[1])\r\n                ? this.wrapperSize\r\n                : 0;\r\n            momentumInfo = this.hasScroll\r\n                ? this.momentum(this.currentPos, this.startPos, duration, this.maxScrollPos, this.minScrollPos, wrapperSize, this.options)\r\n                : { destination: this.currentPos, duration: 0 };\r\n        }\r\n        else {\r\n            this.hooks.trigger(this.hooks.eventTypes.end, momentumInfo);\r\n        }\r\n        return momentumInfo;\r\n    };\r\n    Behavior.prototype.momentum = function (current, start, time, lowerMargin, upperMargin, wrapperSize, options) {\r\n        if (options === void 0) { options = this.options; }\r\n        var distance = current - start;\r\n        var speed = Math.abs(distance) / time;\r\n        var deceleration = options.deceleration, swipeBounceTime = options.swipeBounceTime, swipeTime = options.swipeTime;\r\n        var duration = Math.min(swipeTime, (speed * 2) / deceleration);\r\n        var momentumData = {\r\n            destination: current + ((speed * speed) / deceleration) * (distance < 0 ? -1 : 1),\r\n            duration: duration,\r\n            rate: 15\r\n        };\r\n        this.hooks.trigger(this.hooks.eventTypes.momentum, momentumData, distance);\r\n        if (momentumData.destination < lowerMargin) {\r\n            momentumData.destination = wrapperSize\r\n                ? Math.max(lowerMargin - wrapperSize / 4, lowerMargin - (wrapperSize / momentumData.rate) * speed)\r\n                : lowerMargin;\r\n            momentumData.duration = swipeBounceTime;\r\n        }\r\n        else if (momentumData.destination > upperMargin) {\r\n            momentumData.destination = wrapperSize\r\n                ? Math.min(upperMargin + wrapperSize / 4, upperMargin + (wrapperSize / momentumData.rate) * speed)\r\n                : upperMargin;\r\n            momentumData.duration = swipeBounceTime;\r\n        }\r\n        momentumData.destination = Math.round(momentumData.destination);\r\n        return momentumData;\r\n    };\r\n    Behavior.prototype.updateDirection = function () {\r\n        var absDist = this.currentPos - this.absStartPos;\r\n        this.setDirection(absDist);\r\n    };\r\n    Behavior.prototype.refresh = function (content) {\r\n        var _a = this.options.rect, size = _a.size, position = _a.position;\r\n        var isWrapperStatic = window.getComputedStyle(this.wrapper, null).position === 'static';\r\n        // Force reflow\r\n        var wrapperRect = getRect(this.wrapper);\r\n        // use client is more fair than offset\r\n        this.wrapperSize = this.wrapper[size === 'width' ? 'clientWidth' : 'clientHeight'];\r\n        this.setContent(content);\r\n        var contentRect = getRect(this.content);\r\n        this.contentSize = contentRect[size];\r\n        this.relativeOffset = contentRect[position];\r\n        /* istanbul ignore if  */\r\n        if (isWrapperStatic) {\r\n            this.relativeOffset -= wrapperRect[position];\r\n        }\r\n        this.computeBoundary();\r\n        this.setDirection(0 /* Default */);\r\n    };\r\n    Behavior.prototype.setContent = function (content) {\r\n        if (content !== this.content) {\r\n            this.content = content;\r\n            this.resetState();\r\n        }\r\n    };\r\n    Behavior.prototype.resetState = function () {\r\n        this.currentPos = 0;\r\n        this.startPos = 0;\r\n        this.dist = 0;\r\n        this.setDirection(0 /* Default */);\r\n        this.setMovingDirection(0 /* Default */);\r\n        this.resetStartPos();\r\n    };\r\n    Behavior.prototype.computeBoundary = function () {\r\n        this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);\r\n        var boundary = {\r\n            minScrollPos: 0,\r\n            maxScrollPos: this.wrapperSize - this.contentSize\r\n        };\r\n        if (boundary.maxScrollPos < 0) {\r\n            boundary.maxScrollPos -= this.relativeOffset;\r\n            if (this.options.specifiedIndexAsContent === 0) {\r\n                boundary.minScrollPos = -this.relativeOffset;\r\n            }\r\n        }\r\n        this.hooks.trigger(this.hooks.eventTypes.computeBoundary, boundary);\r\n        this.minScrollPos = boundary.minScrollPos;\r\n        this.maxScrollPos = boundary.maxScrollPos;\r\n        this.hasScroll =\r\n            this.options.scrollable && this.maxScrollPos < this.minScrollPos;\r\n        if (!this.hasScroll && this.minScrollPos < this.maxScrollPos) {\r\n            this.maxScrollPos = this.minScrollPos;\r\n            this.contentSize = this.wrapperSize;\r\n        }\r\n    };\r\n    Behavior.prototype.updatePosition = function (pos) {\r\n        this.currentPos = pos;\r\n    };\r\n    Behavior.prototype.getCurrentPos = function () {\r\n        return this.currentPos;\r\n    };\r\n    Behavior.prototype.checkInBoundary = function () {\r\n        var position = this.adjustPosition(this.currentPos);\r\n        var inBoundary = position === this.getCurrentPos();\r\n        return {\r\n            position: position,\r\n            inBoundary: inBoundary\r\n        };\r\n    };\r\n    // adjust position when out of boundary\r\n    Behavior.prototype.adjustPosition = function (pos) {\r\n        if (!this.hasScroll &&\r\n            !this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)) {\r\n            pos = this.minScrollPos;\r\n        }\r\n        else if (pos > this.minScrollPos) {\r\n            pos = this.minScrollPos;\r\n        }\r\n        else if (pos < this.maxScrollPos) {\r\n            pos = this.maxScrollPos;\r\n        }\r\n        return pos;\r\n    };\r\n    Behavior.prototype.updateStartPos = function () {\r\n        this.startPos = this.currentPos;\r\n    };\r\n    Behavior.prototype.updateAbsStartPos = function () {\r\n        this.absStartPos = this.currentPos;\r\n    };\r\n    Behavior.prototype.resetStartPos = function () {\r\n        this.updateStartPos();\r\n        this.updateAbsStartPos();\r\n    };\r\n    Behavior.prototype.getAbsDist = function (delta) {\r\n        this.dist += delta;\r\n        return Math.abs(this.dist);\r\n    };\r\n    Behavior.prototype.destroy = function () {\r\n        this.hooks.destroy();\r\n    };\r\n    return Behavior;\r\n}());\n\nvar _a, _b, _c, _d;\r\nvar PassthroughHandlers = (_a = {},\r\n    _a[\"yes\" /* Yes */] = function (e) {\r\n        return true;\r\n    },\r\n    _a[\"no\" /* No */] = function (e) {\r\n        maybePrevent(e);\r\n        return false;\r\n    },\r\n    _a);\r\nvar DirectionMap = (_b = {},\r\n    _b[\"horizontal\" /* Horizontal */] = (_c = {},\r\n        _c[\"yes\" /* Yes */] = \"horizontal\" /* Horizontal */,\r\n        _c[\"no\" /* No */] = \"vertical\" /* Vertical */,\r\n        _c),\r\n    _b[\"vertical\" /* Vertical */] = (_d = {},\r\n        _d[\"yes\" /* Yes */] = \"vertical\" /* Vertical */,\r\n        _d[\"no\" /* No */] = \"horizontal\" /* Horizontal */,\r\n        _d),\r\n    _b);\r\nvar DirectionLockAction = /** @class */ (function () {\r\n    function DirectionLockAction(directionLockThreshold, freeScroll, eventPassthrough) {\r\n        this.directionLockThreshold = directionLockThreshold;\r\n        this.freeScroll = freeScroll;\r\n        this.eventPassthrough = eventPassthrough;\r\n        this.reset();\r\n    }\r\n    DirectionLockAction.prototype.reset = function () {\r\n        this.directionLocked = \"\" /* Default */;\r\n    };\r\n    DirectionLockAction.prototype.checkMovingDirection = function (absDistX, absDistY, e) {\r\n        this.computeDirectionLock(absDistX, absDistY);\r\n        return this.handleEventPassthrough(e);\r\n    };\r\n    DirectionLockAction.prototype.adjustDelta = function (deltaX, deltaY) {\r\n        if (this.directionLocked === \"horizontal\" /* Horizontal */) {\r\n            deltaY = 0;\r\n        }\r\n        else if (this.directionLocked === \"vertical\" /* Vertical */) {\r\n            deltaX = 0;\r\n        }\r\n        return {\r\n            deltaX: deltaX,\r\n            deltaY: deltaY,\r\n        };\r\n    };\r\n    DirectionLockAction.prototype.computeDirectionLock = function (absDistX, absDistY) {\r\n        // If you are scrolling in one direction, lock it\r\n        if (this.directionLocked === \"\" /* Default */ && !this.freeScroll) {\r\n            if (absDistX > absDistY + this.directionLockThreshold) {\r\n                this.directionLocked = \"horizontal\" /* Horizontal */; // lock horizontally\r\n            }\r\n            else if (absDistY >= absDistX + this.directionLockThreshold) {\r\n                this.directionLocked = \"vertical\" /* Vertical */; // lock vertically\r\n            }\r\n            else {\r\n                this.directionLocked = \"none\" /* None */; // no lock\r\n            }\r\n        }\r\n    };\r\n    DirectionLockAction.prototype.handleEventPassthrough = function (e) {\r\n        var handleMap = DirectionMap[this.directionLocked];\r\n        if (handleMap) {\r\n            if (this.eventPassthrough === handleMap[\"yes\" /* Yes */]) {\r\n                return PassthroughHandlers[\"yes\" /* Yes */](e);\r\n            }\r\n            else if (this.eventPassthrough === handleMap[\"no\" /* No */]) {\r\n                return PassthroughHandlers[\"no\" /* No */](e);\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    return DirectionLockAction;\r\n}());\n\nvar applyQuadrantTransformation = function (deltaX, deltaY, quadrant) {\r\n    if (quadrant === 2 /* Second */) {\r\n        return [deltaY, -deltaX];\r\n    }\r\n    else if (quadrant === 3 /* Third */) {\r\n        return [-deltaX, -deltaY];\r\n    }\r\n    else if (quadrant === 4 /* Forth */) {\r\n        return [-deltaY, deltaX];\r\n    }\r\n    else {\r\n        return [deltaX, deltaY];\r\n    }\r\n};\r\nvar ScrollerActions = /** @class */ (function () {\r\n    function ScrollerActions(scrollBehaviorX, scrollBehaviorY, actionsHandler, animater, options) {\r\n        this.hooks = new EventEmitter([\r\n            'start',\r\n            'beforeMove',\r\n            'scrollStart',\r\n            'scroll',\r\n            'beforeEnd',\r\n            'end',\r\n            'scrollEnd',\r\n            'contentNotMoved',\r\n            'detectMovingDirection',\r\n            'coordinateTransformation',\r\n        ]);\r\n        this.scrollBehaviorX = scrollBehaviorX;\r\n        this.scrollBehaviorY = scrollBehaviorY;\r\n        this.actionsHandler = actionsHandler;\r\n        this.animater = animater;\r\n        this.options = options;\r\n        this.directionLockAction = new DirectionLockAction(options.directionLockThreshold, options.freeScroll, options.eventPassthrough);\r\n        this.enabled = true;\r\n        this.bindActionsHandler();\r\n    }\r\n    ScrollerActions.prototype.bindActionsHandler = function () {\r\n        var _this = this;\r\n        // [mouse|touch]start event\r\n        this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start, function (e) {\r\n            if (!_this.enabled)\r\n                return true;\r\n            return _this.handleStart(e);\r\n        });\r\n        // [mouse|touch]move event\r\n        this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move, function (_a) {\r\n            var deltaX = _a.deltaX, deltaY = _a.deltaY, e = _a.e;\r\n            if (!_this.enabled)\r\n                return true;\r\n            var _b = applyQuadrantTransformation(deltaX, deltaY, _this.options.quadrant), transformateDeltaX = _b[0], transformateDeltaY = _b[1];\r\n            var transformateDeltaData = {\r\n                deltaX: transformateDeltaX,\r\n                deltaY: transformateDeltaY,\r\n            };\r\n            _this.hooks.trigger(_this.hooks.eventTypes.coordinateTransformation, transformateDeltaData);\r\n            return _this.handleMove(transformateDeltaData.deltaX, transformateDeltaData.deltaY, e);\r\n        });\r\n        // [mouse|touch]end event\r\n        this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end, function (e) {\r\n            if (!_this.enabled)\r\n                return true;\r\n            return _this.handleEnd(e);\r\n        });\r\n        // click\r\n        this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click, function (e) {\r\n            // handle native click event\r\n            if (_this.enabled && !e._constructed) {\r\n                _this.handleClick(e);\r\n            }\r\n        });\r\n    };\r\n    ScrollerActions.prototype.handleStart = function (e) {\r\n        var timestamp = getNow();\r\n        this.fingerMoved = false;\r\n        this.contentMoved = false;\r\n        this.startTime = timestamp;\r\n        this.directionLockAction.reset();\r\n        this.scrollBehaviorX.start();\r\n        this.scrollBehaviorY.start();\r\n        // force stopping last transition or animation\r\n        this.animater.doStop();\r\n        this.scrollBehaviorX.resetStartPos();\r\n        this.scrollBehaviorY.resetStartPos();\r\n        this.hooks.trigger(this.hooks.eventTypes.start, e);\r\n    };\r\n    ScrollerActions.prototype.handleMove = function (deltaX, deltaY, e) {\r\n        if (this.hooks.trigger(this.hooks.eventTypes.beforeMove, e)) {\r\n            return;\r\n        }\r\n        var absDistX = this.scrollBehaviorX.getAbsDist(deltaX);\r\n        var absDistY = this.scrollBehaviorY.getAbsDist(deltaY);\r\n        var timestamp = getNow();\r\n        // We need to move at least momentumLimitDistance pixels\r\n        // for the scrolling to initiate\r\n        if (this.checkMomentum(absDistX, absDistY, timestamp)) {\r\n            return true;\r\n        }\r\n        if (this.directionLockAction.checkMovingDirection(absDistX, absDistY, e)) {\r\n            this.actionsHandler.setInitiated();\r\n            return true;\r\n        }\r\n        var delta = this.directionLockAction.adjustDelta(deltaX, deltaY);\r\n        var prevX = this.scrollBehaviorX.getCurrentPos();\r\n        var newX = this.scrollBehaviorX.move(delta.deltaX);\r\n        var prevY = this.scrollBehaviorY.getCurrentPos();\r\n        var newY = this.scrollBehaviorY.move(delta.deltaY);\r\n        if (this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)) {\r\n            return;\r\n        }\r\n        if (!this.fingerMoved) {\r\n            this.fingerMoved = true;\r\n        }\r\n        var positionChanged = newX !== prevX || newY !== prevY;\r\n        if (!this.contentMoved && !positionChanged) {\r\n            this.hooks.trigger(this.hooks.eventTypes.contentNotMoved);\r\n        }\r\n        if (!this.contentMoved && positionChanged) {\r\n            this.contentMoved = true;\r\n            this.hooks.trigger(this.hooks.eventTypes.scrollStart);\r\n        }\r\n        if (this.contentMoved && positionChanged) {\r\n            this.animater.translate({\r\n                x: newX,\r\n                y: newY,\r\n            });\r\n            this.dispatchScroll(timestamp);\r\n        }\r\n    };\r\n    ScrollerActions.prototype.dispatchScroll = function (timestamp) {\r\n        // dispatch scroll in interval time\r\n        if (timestamp - this.startTime > this.options.momentumLimitTime) {\r\n            // refresh time and starting position to initiate a momentum\r\n            this.startTime = timestamp;\r\n            this.scrollBehaviorX.updateStartPos();\r\n            this.scrollBehaviorY.updateStartPos();\r\n            if (this.options.probeType === 1 /* Throttle */) {\r\n                this.hooks.trigger(this.hooks.eventTypes.scroll, this.getCurrentPos());\r\n            }\r\n        }\r\n        // dispatch scroll all the time\r\n        if (this.options.probeType > 1 /* Throttle */) {\r\n            this.hooks.trigger(this.hooks.eventTypes.scroll, this.getCurrentPos());\r\n        }\r\n    };\r\n    ScrollerActions.prototype.checkMomentum = function (absDistX, absDistY, timestamp) {\r\n        return (timestamp - this.endTime > this.options.momentumLimitTime &&\r\n            absDistY < this.options.momentumLimitDistance &&\r\n            absDistX < this.options.momentumLimitDistance);\r\n    };\r\n    ScrollerActions.prototype.handleEnd = function (e) {\r\n        if (this.hooks.trigger(this.hooks.eventTypes.beforeEnd, e)) {\r\n            return;\r\n        }\r\n        var currentPos = this.getCurrentPos();\r\n        this.scrollBehaviorX.updateDirection();\r\n        this.scrollBehaviorY.updateDirection();\r\n        if (this.hooks.trigger(this.hooks.eventTypes.end, e, currentPos)) {\r\n            return true;\r\n        }\r\n        currentPos = this.ensureIntegerPos(currentPos);\r\n        this.animater.translate(currentPos);\r\n        this.endTime = getNow();\r\n        var duration = this.endTime - this.startTime;\r\n        this.hooks.trigger(this.hooks.eventTypes.scrollEnd, currentPos, duration);\r\n    };\r\n    ScrollerActions.prototype.ensureIntegerPos = function (currentPos) {\r\n        this.ensuringInteger = true;\r\n        var x = currentPos.x, y = currentPos.y;\r\n        var _a = this.scrollBehaviorX, minScrollPosX = _a.minScrollPos, maxScrollPosX = _a.maxScrollPos;\r\n        var _b = this.scrollBehaviorY, minScrollPosY = _b.minScrollPos, maxScrollPosY = _b.maxScrollPos;\r\n        x = x > 0 ? Math.ceil(x) : Math.floor(x);\r\n        y = y > 0 ? Math.ceil(y) : Math.floor(y);\r\n        x = between(x, maxScrollPosX, minScrollPosX);\r\n        y = between(y, maxScrollPosY, minScrollPosY);\r\n        return { x: x, y: y };\r\n    };\r\n    ScrollerActions.prototype.handleClick = function (e) {\r\n        if (!preventDefaultExceptionFn(e.target, this.options.preventDefaultException)) {\r\n            maybePrevent(e);\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n    ScrollerActions.prototype.getCurrentPos = function () {\r\n        return {\r\n            x: this.scrollBehaviorX.getCurrentPos(),\r\n            y: this.scrollBehaviorY.getCurrentPos(),\r\n        };\r\n    };\r\n    ScrollerActions.prototype.refresh = function () {\r\n        this.endTime = 0;\r\n    };\r\n    ScrollerActions.prototype.destroy = function () {\r\n        this.hooks.destroy();\r\n    };\r\n    return ScrollerActions;\r\n}());\n\nfunction createActionsHandlerOptions(bsOptions) {\r\n    var options = [\r\n        'click',\r\n        'bindToWrapper',\r\n        'disableMouse',\r\n        'disableTouch',\r\n        'preventDefault',\r\n        'stopPropagation',\r\n        'tagException',\r\n        'preventDefaultException',\r\n        'autoEndDistance',\r\n    ].reduce(function (prev, cur) {\r\n        prev[cur] = bsOptions[cur];\r\n        return prev;\r\n    }, {});\r\n    return options;\r\n}\r\nfunction createBehaviorOptions(bsOptions, extraProp, bounces, rect) {\r\n    var options = [\r\n        'momentum',\r\n        'momentumLimitTime',\r\n        'momentumLimitDistance',\r\n        'deceleration',\r\n        'swipeBounceTime',\r\n        'swipeTime',\r\n        'outOfBoundaryDampingFactor',\r\n        'specifiedIndexAsContent',\r\n    ].reduce(function (prev, cur) {\r\n        prev[cur] = bsOptions[cur];\r\n        return prev;\r\n    }, {});\r\n    // add extra property\r\n    options.scrollable = !!bsOptions[extraProp];\r\n    options.bounces = bounces;\r\n    options.rect = rect;\r\n    return options;\r\n}\n\nfunction bubbling(source, target, events) {\r\n    events.forEach(function (event) {\r\n        var sourceEvent;\r\n        var targetEvent;\r\n        if (typeof event === 'string') {\r\n            sourceEvent = targetEvent = event;\r\n        }\r\n        else {\r\n            sourceEvent = event.source;\r\n            targetEvent = event.target;\r\n        }\r\n        source.on(sourceEvent, function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return target.trigger.apply(target, __spreadArrays([targetEvent], args));\r\n        });\r\n    });\r\n}\n\nfunction isSamePoint(startPoint, endPoint) {\r\n    // keys of startPoint and endPoint should be equal\r\n    var keys = Object.keys(startPoint);\r\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\r\n        var key = keys_1[_i];\r\n        if (startPoint[key] !== endPoint[key])\r\n            return false;\r\n    }\r\n    return true;\r\n}\n\nvar MIN_SCROLL_DISTANCE = 1;\r\nvar Scroller = /** @class */ (function () {\r\n    function Scroller(wrapper, content, options) {\r\n        this.wrapper = wrapper;\r\n        this.content = content;\r\n        this.resizeTimeout = 0;\r\n        this.hooks = new EventEmitter([\r\n            'beforeStart',\r\n            'beforeMove',\r\n            'beforeScrollStart',\r\n            'scrollStart',\r\n            'scroll',\r\n            'beforeEnd',\r\n            'scrollEnd',\r\n            'resize',\r\n            'touchEnd',\r\n            'end',\r\n            'flick',\r\n            'scrollCancel',\r\n            'momentum',\r\n            'scrollTo',\r\n            'minDistanceScroll',\r\n            'scrollToElement',\r\n            'beforeRefresh',\r\n        ]);\r\n        this.options = options;\r\n        var _a = this.options.bounce, left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;\r\n        // direction X\r\n        this.scrollBehaviorX = new Behavior(wrapper, content, createBehaviorOptions(options, 'scrollX', [left, right], {\r\n            size: 'width',\r\n            position: 'left',\r\n        }));\r\n        // direction Y\r\n        this.scrollBehaviorY = new Behavior(wrapper, content, createBehaviorOptions(options, 'scrollY', [top, bottom], {\r\n            size: 'height',\r\n            position: 'top',\r\n        }));\r\n        this.translater = new Translater(this.content);\r\n        this.animater = createAnimater(this.content, this.translater, this.options);\r\n        this.actionsHandler = new ActionsHandler(this.options.bindToTarget ? this.content : wrapper, createActionsHandlerOptions(this.options));\r\n        this.actions = new ScrollerActions(this.scrollBehaviorX, this.scrollBehaviorY, this.actionsHandler, this.animater, this.options);\r\n        var resizeHandler = this.resize.bind(this);\r\n        this.resizeRegister = new EventRegister(window, [\r\n            {\r\n                name: 'orientationchange',\r\n                handler: resizeHandler,\r\n            },\r\n            {\r\n                name: 'resize',\r\n                handler: resizeHandler,\r\n            },\r\n        ]);\r\n        this.registerTransitionEnd();\r\n        this.init();\r\n    }\r\n    Scroller.prototype.init = function () {\r\n        var _this = this;\r\n        this.bindTranslater();\r\n        this.bindAnimater();\r\n        this.bindActions();\r\n        // enable pointer events when scrolling ends\r\n        this.hooks.on(this.hooks.eventTypes.scrollEnd, function () {\r\n            _this.togglePointerEvents(true);\r\n        });\r\n    };\r\n    Scroller.prototype.registerTransitionEnd = function () {\r\n        this.transitionEndRegister = new EventRegister(this.content, [\r\n            {\r\n                name: style.transitionEnd,\r\n                handler: this.transitionEnd.bind(this),\r\n            },\r\n        ]);\r\n    };\r\n    Scroller.prototype.bindTranslater = function () {\r\n        var _this = this;\r\n        var hooks = this.translater.hooks;\r\n        hooks.on(hooks.eventTypes.beforeTranslate, function (transformStyle) {\r\n            if (_this.options.translateZ) {\r\n                transformStyle.push(_this.options.translateZ);\r\n            }\r\n        });\r\n        // disable pointer events when scrolling\r\n        hooks.on(hooks.eventTypes.translate, function (pos) {\r\n            var prevPos = _this.getCurrentPos();\r\n            _this.updatePositions(pos);\r\n            // scrollEnd will dispatch when scroll is force stopping in touchstart handler\r\n            // so in touchend handler, don't toggle pointer-events\r\n            if (_this.actions.ensuringInteger === true) {\r\n                _this.actions.ensuringInteger = false;\r\n                return;\r\n            }\r\n            // a valid translate\r\n            if (pos.x !== prevPos.x || pos.y !== prevPos.y) {\r\n                _this.togglePointerEvents(false);\r\n            }\r\n        });\r\n    };\r\n    Scroller.prototype.bindAnimater = function () {\r\n        var _this = this;\r\n        // reset position\r\n        this.animater.hooks.on(this.animater.hooks.eventTypes.end, function (pos) {\r\n            if (!_this.resetPosition(_this.options.bounceTime)) {\r\n                _this.animater.setPending(false);\r\n                _this.hooks.trigger(_this.hooks.eventTypes.scrollEnd, pos);\r\n            }\r\n        });\r\n        bubbling(this.animater.hooks, this.hooks, [\r\n            {\r\n                source: this.animater.hooks.eventTypes.move,\r\n                target: this.hooks.eventTypes.scroll,\r\n            },\r\n            {\r\n                source: this.animater.hooks.eventTypes.forceStop,\r\n                target: this.hooks.eventTypes.scrollEnd,\r\n            },\r\n        ]);\r\n    };\r\n    Scroller.prototype.bindActions = function () {\r\n        var _this = this;\r\n        var actions = this.actions;\r\n        bubbling(actions.hooks, this.hooks, [\r\n            {\r\n                source: actions.hooks.eventTypes.start,\r\n                target: this.hooks.eventTypes.beforeStart,\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.start,\r\n                target: this.hooks.eventTypes.beforeScrollStart,\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.beforeMove,\r\n                target: this.hooks.eventTypes.beforeMove,\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.scrollStart,\r\n                target: this.hooks.eventTypes.scrollStart,\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.scroll,\r\n                target: this.hooks.eventTypes.scroll,\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.beforeEnd,\r\n                target: this.hooks.eventTypes.beforeEnd,\r\n            },\r\n        ]);\r\n        actions.hooks.on(actions.hooks.eventTypes.end, function (e, pos) {\r\n            _this.hooks.trigger(_this.hooks.eventTypes.touchEnd, pos);\r\n            if (_this.hooks.trigger(_this.hooks.eventTypes.end, pos)) {\r\n                return true;\r\n            }\r\n            // check if it is a click operation\r\n            if (!actions.fingerMoved) {\r\n                _this.hooks.trigger(_this.hooks.eventTypes.scrollCancel);\r\n                if (_this.checkClick(e)) {\r\n                    return true;\r\n                }\r\n            }\r\n            // reset if we are outside of the boundaries\r\n            if (_this.resetPosition(_this.options.bounceTime, ease.bounce)) {\r\n                _this.animater.setForceStopped(false);\r\n                return true;\r\n            }\r\n        });\r\n        actions.hooks.on(actions.hooks.eventTypes.scrollEnd, function (pos, duration) {\r\n            var deltaX = Math.abs(pos.x - _this.scrollBehaviorX.startPos);\r\n            var deltaY = Math.abs(pos.y - _this.scrollBehaviorY.startPos);\r\n            if (_this.checkFlick(duration, deltaX, deltaY)) {\r\n                _this.animater.setForceStopped(false);\r\n                _this.hooks.trigger(_this.hooks.eventTypes.flick);\r\n                return;\r\n            }\r\n            if (_this.momentum(pos, duration)) {\r\n                _this.animater.setForceStopped(false);\r\n                return;\r\n            }\r\n            if (actions.contentMoved) {\r\n                _this.hooks.trigger(_this.hooks.eventTypes.scrollEnd, pos);\r\n            }\r\n            if (_this.animater.forceStopped) {\r\n                _this.animater.setForceStopped(false);\r\n            }\r\n        });\r\n    };\r\n    Scroller.prototype.checkFlick = function (duration, deltaX, deltaY) {\r\n        var flickMinMovingDistance = 1; // distinguish flick from click\r\n        if (this.hooks.events.flick.length > 1 &&\r\n            duration < this.options.flickLimitTime &&\r\n            deltaX < this.options.flickLimitDistance &&\r\n            deltaY < this.options.flickLimitDistance &&\r\n            (deltaY > flickMinMovingDistance || deltaX > flickMinMovingDistance)) {\r\n            return true;\r\n        }\r\n    };\r\n    Scroller.prototype.momentum = function (pos, duration) {\r\n        var meta = {\r\n            time: 0,\r\n            easing: ease.swiper,\r\n            newX: pos.x,\r\n            newY: pos.y,\r\n        };\r\n        // start momentum animation if needed\r\n        var momentumX = this.scrollBehaviorX.end(duration);\r\n        var momentumY = this.scrollBehaviorY.end(duration);\r\n        meta.newX = isUndef(momentumX.destination)\r\n            ? meta.newX\r\n            : momentumX.destination;\r\n        meta.newY = isUndef(momentumY.destination)\r\n            ? meta.newY\r\n            : momentumY.destination;\r\n        meta.time = Math.max(momentumX.duration, momentumY.duration);\r\n        this.hooks.trigger(this.hooks.eventTypes.momentum, meta, this);\r\n        // when x or y changed, do momentum animation now!\r\n        if (meta.newX !== pos.x || meta.newY !== pos.y) {\r\n            // change easing function when scroller goes out of the boundaries\r\n            if (meta.newX > this.scrollBehaviorX.minScrollPos ||\r\n                meta.newX < this.scrollBehaviorX.maxScrollPos ||\r\n                meta.newY > this.scrollBehaviorY.minScrollPos ||\r\n                meta.newY < this.scrollBehaviorY.maxScrollPos) {\r\n                meta.easing = ease.swipeBounce;\r\n            }\r\n            this.scrollTo(meta.newX, meta.newY, meta.time, meta.easing);\r\n            return true;\r\n        }\r\n    };\r\n    Scroller.prototype.checkClick = function (e) {\r\n        var cancelable = {\r\n            preventClick: this.animater.forceStopped,\r\n        };\r\n        // we scrolled less than momentumLimitDistance pixels\r\n        if (this.hooks.trigger(this.hooks.eventTypes.checkClick)) {\r\n            this.animater.setForceStopped(false);\r\n            return true;\r\n        }\r\n        if (!cancelable.preventClick) {\r\n            var _dblclick = this.options.dblclick;\r\n            var dblclickTrigged = false;\r\n            if (_dblclick && this.lastClickTime) {\r\n                var _a = _dblclick.delay, delay = _a === void 0 ? 300 : _a;\r\n                if (getNow() - this.lastClickTime < delay) {\r\n                    dblclickTrigged = true;\r\n                    dblclick(e);\r\n                }\r\n            }\r\n            if (this.options.tap) {\r\n                tap(e, this.options.tap);\r\n            }\r\n            if (this.options.click &&\r\n                !preventDefaultExceptionFn(e.target, this.options.preventDefaultException)) {\r\n                click(e);\r\n            }\r\n            this.lastClickTime = dblclickTrigged ? null : getNow();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Scroller.prototype.resize = function () {\r\n        var _this = this;\r\n        if (!this.actions.enabled) {\r\n            return;\r\n        }\r\n        // fix a scroll problem under Android condition\r\n        /* istanbul ignore if  */\r\n        if (isAndroid) {\r\n            this.wrapper.scrollTop = 0;\r\n        }\r\n        clearTimeout(this.resizeTimeout);\r\n        this.resizeTimeout = window.setTimeout(function () {\r\n            _this.hooks.trigger(_this.hooks.eventTypes.resize);\r\n        }, this.options.resizePolling);\r\n    };\r\n    /* istanbul ignore next */\r\n    Scroller.prototype.transitionEnd = function (e) {\r\n        if (e.target !== this.content || !this.animater.pending) {\r\n            return;\r\n        }\r\n        var animater = this.animater;\r\n        animater.transitionTime();\r\n        if (!this.resetPosition(this.options.bounceTime, ease.bounce)) {\r\n            this.animater.setPending(false);\r\n            if (this.options.probeType !== 3 /* Realtime */) {\r\n                this.hooks.trigger(this.hooks.eventTypes.scrollEnd, this.getCurrentPos());\r\n            }\r\n        }\r\n    };\r\n    Scroller.prototype.togglePointerEvents = function (enabled) {\r\n        if (enabled === void 0) { enabled = true; }\r\n        var el = this.content.children.length\r\n            ? this.content.children\r\n            : [this.content];\r\n        var pointerEvents = enabled ? 'auto' : 'none';\r\n        for (var i = 0; i < el.length; i++) {\r\n            var node = el[i];\r\n            // ignore BetterScroll instance's wrapper DOM\r\n            /* istanbul ignore if  */\r\n            if (node.isBScrollContainer) {\r\n                continue;\r\n            }\r\n            node.style.pointerEvents = pointerEvents;\r\n        }\r\n    };\r\n    Scroller.prototype.refresh = function (content) {\r\n        var contentChanged = this.setContent(content);\r\n        this.hooks.trigger(this.hooks.eventTypes.beforeRefresh);\r\n        this.scrollBehaviorX.refresh(content);\r\n        this.scrollBehaviorY.refresh(content);\r\n        if (contentChanged) {\r\n            this.translater.setContent(content);\r\n            this.animater.setContent(content);\r\n            this.transitionEndRegister.destroy();\r\n            this.registerTransitionEnd();\r\n            if (this.options.bindToTarget) {\r\n                this.actionsHandler.setContent(content);\r\n            }\r\n        }\r\n        this.actions.refresh();\r\n        this.wrapperOffset = offset(this.wrapper);\r\n    };\r\n    Scroller.prototype.setContent = function (content) {\r\n        var contentChanged = content !== this.content;\r\n        if (contentChanged) {\r\n            this.content = content;\r\n        }\r\n        return contentChanged;\r\n    };\r\n    Scroller.prototype.scrollBy = function (deltaX, deltaY, time, easing) {\r\n        if (time === void 0) { time = 0; }\r\n        var _a = this.getCurrentPos(), x = _a.x, y = _a.y;\r\n        easing = !easing ? ease.bounce : easing;\r\n        deltaX += x;\r\n        deltaY += y;\r\n        this.scrollTo(deltaX, deltaY, time, easing);\r\n    };\r\n    Scroller.prototype.scrollTo = function (x, y, time, easing, extraTransform) {\r\n        if (time === void 0) { time = 0; }\r\n        if (easing === void 0) { easing = ease.bounce; }\r\n        if (extraTransform === void 0) { extraTransform = {\r\n            start: {},\r\n            end: {},\r\n        }; }\r\n        var easingFn = this.options.useTransition ? easing.style : easing.fn;\r\n        var currentPos = this.getCurrentPos();\r\n        var startPoint = __assign({ x: currentPos.x, y: currentPos.y }, extraTransform.start);\r\n        var endPoint = __assign({ x: x,\r\n            y: y }, extraTransform.end);\r\n        this.hooks.trigger(this.hooks.eventTypes.scrollTo, endPoint);\r\n        // it is an useless move\r\n        if (isSamePoint(startPoint, endPoint))\r\n            return;\r\n        var deltaX = Math.abs(endPoint.x - startPoint.x);\r\n        var deltaY = Math.abs(endPoint.y - startPoint.y);\r\n        // considering of browser compatibility for decimal transform value\r\n        // force translating immediately\r\n        if (deltaX < MIN_SCROLL_DISTANCE && deltaY < MIN_SCROLL_DISTANCE) {\r\n            time = 0;\r\n            this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll);\r\n        }\r\n        this.animater.move(startPoint, endPoint, time, easingFn);\r\n    };\r\n    Scroller.prototype.scrollToElement = function (el, time, offsetX, offsetY, easing) {\r\n        var targetEle = getElement(el);\r\n        var pos = offset(targetEle);\r\n        var getOffset = function (offset, size, wrapperSize) {\r\n            if (typeof offset === 'number') {\r\n                return offset;\r\n            }\r\n            // if offsetX/Y are true we center the element to the screen\r\n            return offset ? Math.round(size / 2 - wrapperSize / 2) : 0;\r\n        };\r\n        offsetX = getOffset(offsetX, targetEle.offsetWidth, this.wrapper.offsetWidth);\r\n        offsetY = getOffset(offsetY, targetEle.offsetHeight, this.wrapper.offsetHeight);\r\n        var getPos = function (pos, wrapperPos, offset, scrollBehavior) {\r\n            pos -= wrapperPos;\r\n            pos = scrollBehavior.adjustPosition(pos - offset);\r\n            return pos;\r\n        };\r\n        pos.left = getPos(pos.left, this.wrapperOffset.left, offsetX, this.scrollBehaviorX);\r\n        pos.top = getPos(pos.top, this.wrapperOffset.top, offsetY, this.scrollBehaviorY);\r\n        if (this.hooks.trigger(this.hooks.eventTypes.scrollToElement, targetEle, pos)) {\r\n            return;\r\n        }\r\n        this.scrollTo(pos.left, pos.top, time, easing);\r\n    };\r\n    Scroller.prototype.resetPosition = function (time, easing) {\r\n        if (time === void 0) { time = 0; }\r\n        if (easing === void 0) { easing = ease.bounce; }\r\n        var _a = this.scrollBehaviorX.checkInBoundary(), x = _a.position, xInBoundary = _a.inBoundary;\r\n        var _b = this.scrollBehaviorY.checkInBoundary(), y = _b.position, yInBoundary = _b.inBoundary;\r\n        if (xInBoundary && yInBoundary) {\r\n            return false;\r\n        }\r\n        /* istanbul ignore if  */\r\n        if (isIOSBadVersion) {\r\n            // fix ios 13.4 bouncing\r\n            // see it in issues 982\r\n            this.reflow();\r\n        }\r\n        // out of boundary\r\n        this.scrollTo(x, y, time, easing);\r\n        return true;\r\n    };\r\n    /* istanbul ignore next */\r\n    Scroller.prototype.reflow = function () {\r\n        this._reflow = this.content.offsetHeight;\r\n    };\r\n    Scroller.prototype.updatePositions = function (pos) {\r\n        this.scrollBehaviorX.updatePosition(pos.x);\r\n        this.scrollBehaviorY.updatePosition(pos.y);\r\n    };\r\n    Scroller.prototype.getCurrentPos = function () {\r\n        return this.actions.getCurrentPos();\r\n    };\r\n    Scroller.prototype.enable = function () {\r\n        this.actions.enabled = true;\r\n    };\r\n    Scroller.prototype.disable = function () {\r\n        cancelAnimationFrame(this.animater.timer);\r\n        this.actions.enabled = false;\r\n    };\r\n    Scroller.prototype.destroy = function () {\r\n        var _this = this;\r\n        var keys = [\r\n            'resizeRegister',\r\n            'transitionEndRegister',\r\n            'actionsHandler',\r\n            'actions',\r\n            'hooks',\r\n            'animater',\r\n            'translater',\r\n            'scrollBehaviorX',\r\n            'scrollBehaviorY',\r\n        ];\r\n        keys.forEach(function (key) { return _this[key].destroy(); });\r\n    };\r\n    return Scroller;\r\n}());\n\nvar BScrollConstructor = /** @class */ (function (_super) {\r\n    __extends(BScrollConstructor, _super);\r\n    function BScrollConstructor(el, options) {\r\n        var _this = _super.call(this, [\r\n            'refresh',\r\n            'contentChanged',\r\n            'enable',\r\n            'disable',\r\n            'beforeScrollStart',\r\n            'scrollStart',\r\n            'scroll',\r\n            'scrollEnd',\r\n            'scrollCancel',\r\n            'touchEnd',\r\n            'flick',\r\n            'destroy'\r\n        ]) || this;\r\n        var wrapper = getElement(el);\r\n        if (!wrapper) {\r\n            warn('Can not resolve the wrapper DOM.');\r\n            return _this;\r\n        }\r\n        _this.plugins = {};\r\n        _this.options = new OptionsConstructor().merge(options).process();\r\n        if (!_this.setContent(wrapper).valid) {\r\n            return _this;\r\n        }\r\n        _this.hooks = new EventEmitter([\r\n            'refresh',\r\n            'enable',\r\n            'disable',\r\n            'destroy',\r\n            'beforeInitialScrollTo',\r\n            'contentChanged'\r\n        ]);\r\n        _this.init(wrapper);\r\n        return _this;\r\n    }\r\n    BScrollConstructor.use = function (ctor) {\r\n        var name = ctor.pluginName;\r\n        var installed = BScrollConstructor.plugins.some(function (plugin) { return ctor === plugin.ctor; });\r\n        if (installed)\r\n            return BScrollConstructor;\r\n        if (isUndef(name)) {\r\n            warn(\"Plugin Class must specify plugin's name in static property by 'pluginName' field.\");\r\n            return BScrollConstructor;\r\n        }\r\n        BScrollConstructor.pluginsMap[name] = true;\r\n        BScrollConstructor.plugins.push({\r\n            name: name,\r\n            applyOrder: ctor.applyOrder,\r\n            ctor: ctor\r\n        });\r\n        return BScrollConstructor;\r\n    };\r\n    BScrollConstructor.prototype.setContent = function (wrapper) {\r\n        var contentChanged = false;\r\n        var valid = true;\r\n        var content = wrapper.children[this.options.specifiedIndexAsContent];\r\n        if (!content) {\r\n            warn('The wrapper need at least one child element to be content element to scroll.');\r\n            valid = false;\r\n        }\r\n        else {\r\n            contentChanged = this.content !== content;\r\n            if (contentChanged) {\r\n                this.content = content;\r\n            }\r\n        }\r\n        return {\r\n            valid: valid,\r\n            contentChanged: contentChanged\r\n        };\r\n    };\r\n    BScrollConstructor.prototype.init = function (wrapper) {\r\n        var _this = this;\r\n        this.wrapper = wrapper;\r\n        // mark wrapper to recognize bs instance by DOM attribute\r\n        wrapper.isBScrollContainer = true;\r\n        this.scroller = new Scroller(wrapper, this.content, this.options);\r\n        this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize, function () {\r\n            _this.refresh();\r\n        });\r\n        this.eventBubbling();\r\n        this.handleAutoBlur();\r\n        this.enable();\r\n        this.proxy(propertiesConfig);\r\n        this.applyPlugins();\r\n        // maybe boundary has changed, should refresh\r\n        this.refreshWithoutReset(this.content);\r\n        var _a = this.options, startX = _a.startX, startY = _a.startY;\r\n        var position = {\r\n            x: startX,\r\n            y: startY\r\n        };\r\n        // maybe plugins want to control scroll position\r\n        if (this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo, position)) {\r\n            return;\r\n        }\r\n        this.scroller.scrollTo(position.x, position.y);\r\n    };\r\n    BScrollConstructor.prototype.applyPlugins = function () {\r\n        var _this = this;\r\n        var options = this.options;\r\n        BScrollConstructor.plugins\r\n            .sort(function (a, b) {\r\n            var _a;\r\n            var applyOrderMap = (_a = {},\r\n                _a[\"pre\" /* Pre */] = -1,\r\n                _a[\"post\" /* Post */] = 1,\r\n                _a);\r\n            var aOrder = a.applyOrder ? applyOrderMap[a.applyOrder] : 0;\r\n            var bOrder = b.applyOrder ? applyOrderMap[b.applyOrder] : 0;\r\n            return aOrder - bOrder;\r\n        })\r\n            .forEach(function (item) {\r\n            var ctor = item.ctor;\r\n            if (options[item.name] && typeof ctor === 'function') {\r\n                _this.plugins[item.name] = new ctor(_this);\r\n            }\r\n        });\r\n    };\r\n    BScrollConstructor.prototype.handleAutoBlur = function () {\r\n        /* istanbul ignore if  */\r\n        if (this.options.autoBlur) {\r\n            this.on(this.eventTypes.beforeScrollStart, function () {\r\n                var activeElement = document.activeElement;\r\n                if (activeElement &&\r\n                    (activeElement.tagName === 'INPUT' ||\r\n                        activeElement.tagName === 'TEXTAREA')) {\r\n                    activeElement.blur();\r\n                }\r\n            });\r\n        }\r\n    };\r\n    BScrollConstructor.prototype.eventBubbling = function () {\r\n        bubbling(this.scroller.hooks, this, [\r\n            this.eventTypes.beforeScrollStart,\r\n            this.eventTypes.scrollStart,\r\n            this.eventTypes.scroll,\r\n            this.eventTypes.scrollEnd,\r\n            this.eventTypes.scrollCancel,\r\n            this.eventTypes.touchEnd,\r\n            this.eventTypes.flick\r\n        ]);\r\n    };\r\n    BScrollConstructor.prototype.refreshWithoutReset = function (content) {\r\n        this.scroller.refresh(content);\r\n        this.hooks.trigger(this.hooks.eventTypes.refresh, content);\r\n        this.trigger(this.eventTypes.refresh, content);\r\n    };\r\n    BScrollConstructor.prototype.proxy = function (propertiesConfig) {\r\n        var _this = this;\r\n        propertiesConfig.forEach(function (_a) {\r\n            var key = _a.key, sourceKey = _a.sourceKey;\r\n            propertiesProxy(_this, sourceKey, key);\r\n        });\r\n    };\r\n    BScrollConstructor.prototype.refresh = function () {\r\n        var _a = this.setContent(this.wrapper), contentChanged = _a.contentChanged, valid = _a.valid;\r\n        if (valid) {\r\n            var content = this.content;\r\n            this.refreshWithoutReset(content);\r\n            if (contentChanged) {\r\n                this.hooks.trigger(this.hooks.eventTypes.contentChanged, content);\r\n                this.trigger(this.eventTypes.contentChanged, content);\r\n            }\r\n            this.scroller.resetPosition();\r\n        }\r\n    };\r\n    BScrollConstructor.prototype.enable = function () {\r\n        this.scroller.enable();\r\n        this.hooks.trigger(this.hooks.eventTypes.enable);\r\n        this.trigger(this.eventTypes.enable);\r\n    };\r\n    BScrollConstructor.prototype.disable = function () {\r\n        this.scroller.disable();\r\n        this.hooks.trigger(this.hooks.eventTypes.disable);\r\n        this.trigger(this.eventTypes.disable);\r\n    };\r\n    BScrollConstructor.prototype.destroy = function () {\r\n        this.hooks.trigger(this.hooks.eventTypes.destroy);\r\n        this.trigger(this.eventTypes.destroy);\r\n        this.scroller.destroy();\r\n    };\r\n    BScrollConstructor.prototype.eventRegister = function (names) {\r\n        this.registerType(names);\r\n    };\r\n    BScrollConstructor.plugins = [];\r\n    BScrollConstructor.pluginsMap = {};\r\n    return BScrollConstructor;\r\n}(EventEmitter));\r\nfunction createBScroll(el, options) {\r\n    var bs = new BScrollConstructor(el, options);\r\n    return bs;\r\n}\r\ncreateBScroll.use = BScrollConstructor.use;\r\ncreateBScroll.plugins = BScrollConstructor.plugins;\r\ncreateBScroll.pluginsMap = BScrollConstructor.pluginsMap;\r\nvar BScroll = createBScroll;\n\nexport { Behavior, CustomOptions, createBScroll, BScroll as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}